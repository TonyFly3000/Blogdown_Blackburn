<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Get R</title>
  <meta name="description" content="This is R book with Get, clean, visualize and model">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Get R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is R book with Get, clean, visualize and model" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Get R" />
  
  <meta name="twitter:description" content="This is R book with Get, clean, visualize and model" />
  

<meta name="author" content="Tony JC Duan">


<meta name="date" content="2018-09-09">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="clean.html">
<link rel="next" href="model.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.2/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.7.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotlyjs-1.29.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotlyjs-1.29.2/plotly-latest.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.1/leaflet.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Get R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#history-of-analytic-software"><i class="fa fa-check"></i><b>1.1</b> History of analytic software</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#install-r-and-rstudio"><i class="fa fa-check"></i><b>1.2</b> Install R and RStudio</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#software-navigation"><i class="fa fa-check"></i><b>1.3</b> Software navigation</a><ul>
<li class="chapter" data-level="1.3.1" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>1.3.1</b> R</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro.html"><a href="intro.html#rstudio"><i class="fa fa-check"></i><b>1.3.2</b> Rstudio</a></li>
<li class="chapter" data-level="1.3.3" data-path="intro.html"><a href="intro.html#rstudio-server"><i class="fa fa-check"></i><b>1.3.3</b> Rstudio server</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#r-version-working-location-and-computer-environment"><i class="fa fa-check"></i><b>1.4</b> R Version , working location and computer environment</a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#r-package"><i class="fa fa-check"></i><b>1.5</b> R Package</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="get.html"><a href="get.html"><i class="fa fa-check"></i><b>2</b> Get</a><ul>
<li class="chapter" data-level="2.1" data-path="get.html"><a href="get.html#connect-with-csvtxt"><i class="fa fa-check"></i><b>2.1</b> Connect with csv/txt</a></li>
<li class="chapter" data-level="2.2" data-path="get.html"><a href="get.html#connect-with-xlsx"><i class="fa fa-check"></i><b>2.2</b> Connect with xlsx</a></li>
<li class="chapter" data-level="2.3" data-path="get.html"><a href="get.html#connect-with-rdsrdatafeather"><i class="fa fa-check"></i><b>2.3</b> Connect with rds/RData/feather</a></li>
<li class="chapter" data-level="2.4" data-path="get.html"><a href="get.html#connect-with-sasstatmatlab-ect"><i class="fa fa-check"></i><b>2.4</b> Connect with sas/stat/matlab ect</a></li>
<li class="chapter" data-level="2.5" data-path="get.html"><a href="get.html#connect-with-database-mysqlsqliteteradatapostgresql"><i class="fa fa-check"></i><b>2.5</b> Connect with database (Mysql;sqlite;teradata;postgresql)</a><ul>
<li class="chapter" data-level="2.5.1" data-path="get.html"><a href="get.html#mysql"><i class="fa fa-check"></i><b>2.5.1</b> Mysql</a></li>
<li class="chapter" data-level="2.5.2" data-path="get.html"><a href="get.html#sqlite"><i class="fa fa-check"></i><b>2.5.2</b> sqlite</a></li>
<li class="chapter" data-level="2.5.3" data-path="get.html"><a href="get.html#teradata-with-rjdbc-package"><i class="fa fa-check"></i><b>2.5.3</b> Teradata with RJDBC package</a></li>
<li class="chapter" data-level="2.5.4" data-path="get.html"><a href="get.html#teradata-with-ebaytd-package"><i class="fa fa-check"></i><b>2.5.4</b> Teradata with ebaytd package</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="get.html"><a href="get.html#connect-with-salesforce"><i class="fa fa-check"></i><b>2.6</b> Connect with salesforce</a></li>
<li class="chapter" data-level="2.7" data-path="get.html"><a href="get.html#connect-with-web-crawler"><i class="fa fa-check"></i><b>2.7</b> Connect with Web crawler</a></li>
<li class="chapter" data-level="2.8" data-path="get.html"><a href="get.html#connect-with-api"><i class="fa fa-check"></i><b>2.8</b> Connect with API</a></li>
<li class="chapter" data-level="2.9" data-path="get.html"><a href="get.html#connect-with-big-data-platformhadoopspark"><i class="fa fa-check"></i><b>2.9</b> Connect with Big data platform(Hadoop;Spark)</a></li>
<li class="chapter" data-level="2.10" data-path="get.html"><a href="get.html#connect-with-other-eg-soundpicturevideo"><i class="fa fa-check"></i><b>2.10</b> Connect with Other eg sound,picture,video</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="clean.html"><a href="clean.html"><i class="fa fa-check"></i><b>3</b> Clean</a><ul>
<li class="chapter" data-level="3.1" data-path="clean.html"><a href="clean.html#working-with-date-and-time"><i class="fa fa-check"></i><b>3.1</b> Working with date and time</a></li>
<li class="chapter" data-level="3.2" data-path="clean.html"><a href="clean.html#working-with-missing-data"><i class="fa fa-check"></i><b>3.2</b> working with missing data</a></li>
<li class="chapter" data-level="3.3" data-path="clean.html"><a href="clean.html#working-with-string"><i class="fa fa-check"></i><b>3.3</b> working with string</a></li>
<li class="chapter" data-level="3.4" data-path="clean.html"><a href="clean.html#fifty-shape-of-data"><i class="fa fa-check"></i><b>3.4</b> Fifty shape of data</a><ul>
<li class="chapter" data-level="3.4.1" data-path="clean.html"><a href="clean.html#dplyr"><i class="fa fa-check"></i><b>3.4.1</b> dplyr</a></li>
<li class="chapter" data-level="3.4.2" data-path="clean.html"><a href="clean.html#sqldf"><i class="fa fa-check"></i><b>3.4.2</b> sqldf</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="visualize.html"><a href="visualize.html"><i class="fa fa-check"></i><b>4</b> Visualize</a><ul>
<li class="chapter" data-level="4.1" data-path="visualize.html"><a href="visualize.html#ggplot2"><i class="fa fa-check"></i><b>4.1</b> ggplot2</a><ul>
<li class="chapter" data-level="4.1.1" data-path="visualize.html"><a href="visualize.html#scatter-plot"><i class="fa fa-check"></i><b>4.1.1</b> scatter plot</a></li>
<li class="chapter" data-level="4.1.2" data-path="visualize.html"><a href="visualize.html#line-plot"><i class="fa fa-check"></i><b>4.1.2</b> line plot</a></li>
<li class="chapter" data-level="4.1.3" data-path="visualize.html"><a href="visualize.html#dot-plot"><i class="fa fa-check"></i><b>4.1.3</b> Dot plot</a></li>
<li class="chapter" data-level="4.1.4" data-path="visualize.html"><a href="visualize.html#histogram"><i class="fa fa-check"></i><b>4.1.4</b> histogram</a></li>
<li class="chapter" data-level="4.1.5" data-path="visualize.html"><a href="visualize.html#boxplot"><i class="fa fa-check"></i><b>4.1.5</b> Boxplot</a></li>
<li class="chapter" data-level="4.1.6" data-path="visualize.html"><a href="visualize.html#other-plot"><i class="fa fa-check"></i><b>4.1.6</b> Other plot</a></li>
<li class="chapter" data-level="4.1.7" data-path="visualize.html"><a href="visualize.html#settingtitlesubtitlex-labely-label"><i class="fa fa-check"></i><b>4.1.7</b> setting:title,subtitle,x label,y label</a></li>
<li class="chapter" data-level="4.1.8" data-path="visualize.html"><a href="visualize.html#themes"><i class="fa fa-check"></i><b>4.1.8</b> themes</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="visualize.html"><a href="visualize.html#plotly"><i class="fa fa-check"></i><b>4.2</b> plotly</a><ul>
<li class="chapter" data-level="4.2.1" data-path="visualize.html"><a href="visualize.html#scatter-plot-1"><i class="fa fa-check"></i><b>4.2.1</b> scatter plot</a></li>
<li class="chapter" data-level="4.2.2" data-path="visualize.html"><a href="visualize.html#line-plot-1"><i class="fa fa-check"></i><b>4.2.2</b> line plot</a></li>
<li class="chapter" data-level="4.2.3" data-path="visualize.html"><a href="visualize.html#bar-plot"><i class="fa fa-check"></i><b>4.2.3</b> bar plot</a></li>
<li class="chapter" data-level="4.2.4" data-path="visualize.html"><a href="visualize.html#dot-plot-1"><i class="fa fa-check"></i><b>4.2.4</b> Dot plot</a></li>
<li class="chapter" data-level="4.2.5" data-path="visualize.html"><a href="visualize.html#histogram-1"><i class="fa fa-check"></i><b>4.2.5</b> histogram</a></li>
<li class="chapter" data-level="4.2.6" data-path="visualize.html"><a href="visualize.html#boxplot-1"><i class="fa fa-check"></i><b>4.2.6</b> Boxplot</a></li>
<li class="chapter" data-level="4.2.7" data-path="visualize.html"><a href="visualize.html#map"><i class="fa fa-check"></i><b>4.2.7</b> Map</a></li>
<li class="chapter" data-level="4.2.8" data-path="visualize.html"><a href="visualize.html#settingtitlesubtitlex-labely-label-1"><i class="fa fa-check"></i><b>4.2.8</b> setting:title,subtitle,x label,y label</a></li>
<li class="chapter" data-level="4.2.9" data-path="visualize.html"><a href="visualize.html#hover-text"><i class="fa fa-check"></i><b>4.2.9</b> hover text</a></li>
<li class="chapter" data-level="4.2.10" data-path="visualize.html"><a href="visualize.html#convert-ggplot-to-plotly"><i class="fa fa-check"></i><b>4.2.10</b> convert ggplot to plotly</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="visualize.html"><a href="visualize.html#leaflet"><i class="fa fa-check"></i><b>4.3</b> leaflet</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="model.html"><a href="model.html"><i class="fa fa-check"></i><b>5</b> Model</a></li>
<li class="chapter" data-level="6" data-path="case.html"><a href="case.html"><i class="fa fa-check"></i><b>6</b> Case</a></li>
<li class="chapter" data-level="7" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>7</b> References</a><ul>
<li class="chapter" data-level="7.1" data-path="references.html"><a href="references.html#the-giants"><i class="fa fa-check"></i><b>7.1</b> The Giants</a></li>
<li class="chapter" data-level="7.2" data-path="references.html"><a href="references.html#book"><i class="fa fa-check"></i><b>7.2</b> Book</a></li>
<li class="chapter" data-level="7.3" data-path="references.html"><a href="references.html#link"><i class="fa fa-check"></i><b>7.3</b> Link</a><ul>
<li class="chapter" data-level="7.3.1" data-path="references.html"><a href="references.html#csv-vs-_csv-r-markdown-r-bookdown-r-blogdown-feather-data-format-database-connection-rmarkdown-cheatsheet"><i class="fa fa-check"></i><b>7.3.1</b> .csv vs _csv ### R markdown ### R bookdown ### R blogdown ### feather data format ### database connection ### rmarkdown cheatsheet</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>8</b> Appendix</a><ul>
<li class="chapter" data-level="8.1" data-path="appendix.html"><a href="appendix.html#delete-filedownload-file-ect."><i class="fa fa-check"></i><b>8.1</b> delete file,download file ect.</a><ul>
<li class="chapter" data-level="8.1.1" data-path="appendix.html"><a href="appendix.html#apply-family"><i class="fa fa-check"></i><b>8.1.1</b> apply family</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="appendix.html"><a href="appendix.html#ggvis"><i class="fa fa-check"></i><b>8.2</b> ggvis</a><ul>
<li class="chapter" data-level="8.2.1" data-path="appendix.html"><a href="appendix.html#scatter-plot-2"><i class="fa fa-check"></i><b>8.2.1</b> scatter plot</a></li>
<li class="chapter" data-level="8.2.2" data-path="appendix.html"><a href="appendix.html#line-plot-2"><i class="fa fa-check"></i><b>8.2.2</b> line plot</a></li>
<li class="chapter" data-level="8.2.3" data-path="appendix.html"><a href="appendix.html#bar-plot-1"><i class="fa fa-check"></i><b>8.2.3</b> bar plot</a></li>
<li class="chapter" data-level="8.2.4" data-path="appendix.html"><a href="appendix.html#dot-plot-2"><i class="fa fa-check"></i><b>8.2.4</b> Dot plot</a></li>
<li class="chapter" data-level="8.2.5" data-path="appendix.html"><a href="appendix.html#histogram-2"><i class="fa fa-check"></i><b>8.2.5</b> histogram</a></li>
<li class="chapter" data-level="8.2.6" data-path="appendix.html"><a href="appendix.html#boxplot-2"><i class="fa fa-check"></i><b>8.2.6</b> Boxplot</a></li>
<li class="chapter" data-level="8.2.7" data-path="appendix.html"><a href="appendix.html#other-plot-1"><i class="fa fa-check"></i><b>8.2.7</b> Other plot</a></li>
<li class="chapter" data-level="8.2.8" data-path="appendix.html"><a href="appendix.html#setting"><i class="fa fa-check"></i><b>8.2.8</b> setting</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/TonyFly2000/Bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Get R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="visualize" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Visualize</h1>
<p>People say a picture is worth a thousand words.In this chapter,will share how to create data chart in ggplot ,create interact chart in ploly and create map in leaflet.</p>
<div id="ggplot2" class="section level2">
<h2><span class="header-section-number">4.1</span> ggplot2</h2>
<div id="scatter-plot" class="section level3">
<h3><span class="header-section-number">4.1.1</span> scatter plot</h3>
<p>pop_m vs year scatter plot:from 1950 to 2007, world pop increased from 2B to 6B,Asia 1B to 4B</p>
<p>by continent with color</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year,continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> pop_m,<span class="dt">color=</span>continent)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()
gg</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<p>by continent with size</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year,continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> pop_m,<span class="dt">size=</span>continent)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()
gg</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>by continent with shape</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year,continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> pop_m,<span class="dt">shape=</span>continent)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()
gg</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Set point to fixed value,for example colour = “red” and size = 3</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> pop_m)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">colour =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">size =</span> <span class="dv">3</span>)
gg</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
</div>
<div id="line-plot" class="section level3">
<h3><span class="header-section-number">4.1.2</span> line plot</h3>
<p>pop_m vs year line plot:from 1950 to 2007, world pop increased from 2B to 6B</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> pop_m)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>()<span class="op">+</span><span class="kw">geom_point</span>()
gg</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>by continent with color</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year,continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> pop_m,<span class="dt">color=</span>continent)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>()
gg</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Add one more line with another variable</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>),<span class="dt">pop_m_haft=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>)<span class="op">/</span><span class="dv">2</span>)

gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> pop_m)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>()<span class="op">+</span><span class="kw">geom_point</span>()<span class="op">+</span><span class="kw">geom_line</span>(<span class="dt">data=</span>gapminder2,<span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> pop_m_haft))
gg</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-7-1.png" width="672" /> ### bar plot</p>
<p>pop_m vs continent bar plot:At 2007, Asia have most pop 3.8B</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">filter</span>(year<span class="op">==</span><span class="dv">2007</span>)<span class="op">%&gt;%</span><span class="kw">group_by</span>(continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> continent,<span class="dt">y=</span>pop_m)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_col</span>()
gg</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
<div id="dot-plot" class="section level3">
<h3><span class="header-section-number">4.1.3</span> Dot plot</h3>
<p>pop_m vs continent bar plot:At 2007, Asia have most pop 3.8B</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">filter</span>(year<span class="op">==</span><span class="dv">2007</span>)<span class="op">%&gt;%</span><span class="kw">group_by</span>(continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>),<span class="dt">pop_m_half=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>)<span class="op">/</span><span class="dv">2</span>)
gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> pop_m, <span class="dt">y =</span> continent)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()
gg</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
<div id="histogram" class="section level3">
<h3><span class="header-section-number">4.1.4</span> histogram</h3>
<p>pop_m histogram:At 2007, most of the countries under 500M pop,two countries over 1000M pop.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">filter</span>(year<span class="op">==</span><span class="dv">2007</span>)<span class="op">%&gt;%</span><span class="kw">mutate</span>(<span class="dt">pop_m=</span>pop<span class="op">/</span><span class="dv">1000000</span>)
gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> pop_m)) <span class="op">+</span><span class="kw">geom_histogram</span>()
gg</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
</div>
<div id="boxplot" class="section level3">
<h3><span class="header-section-number">4.1.5</span> Boxplot</h3>
<p>pop_m Boxplot:At 2007, most of the countries under 500M pop,two countries over 1000M pop.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">filter</span>(year<span class="op">==</span><span class="dv">2007</span>)<span class="op">%&gt;%</span><span class="kw">mutate</span>(<span class="dt">pop_m=</span>pop<span class="op">/</span><span class="dv">1000000</span>)
gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span><span class="dv">1</span>, <span class="dt">y=</span>pop_m)) <span class="op">+</span><span class="kw">geom_boxplot</span>()
gg</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
</div>
<div id="other-plot" class="section level3">
<h3><span class="header-section-number">4.1.6</span> Other plot</h3>
</div>
<div id="settingtitlesubtitlex-labely-label" class="section level3">
<h3><span class="header-section-number">4.1.7</span> setting:title,subtitle,x label,y label</h3>
<p>pop_m vs year line plot:from 1950 to 2007, world pop increased from 2B to 6B</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> pop_m)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>()<span class="op">+</span><span class="kw">geom_point</span>()
gg<span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;A title&quot;</span>, <span class="dt">subtitle =</span> <span class="st">&quot;A subtitle&quot;</span>,<span class="dt">x=</span><span class="st">&quot;New x label&quot;</span>,<span class="dt">y=</span><span class="st">&quot;New y label&quot;</span>)</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
</div>
<div id="themes" class="section level3">
<h3><span class="header-section-number">4.1.8</span> themes</h3>
<p><a href="https://cran.r-project.org/web/packages/ggthemes/vignettes/ggthemes.html" class="uri">https://cran.r-project.org/web/packages/ggthemes/vignettes/ggthemes.html</a></p>
<p>theme_fivethirtyeight:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
<span class="kw">library</span>(ggthemes)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year,continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> pop_m,<span class="dt">color=</span>continent)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()

gg<span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;A title&quot;</span>, <span class="dt">subtitle =</span> <span class="st">&quot;A subtitle&quot;</span>,<span class="dt">x=</span><span class="st">&quot;New x label&quot;</span>,<span class="dt">y=</span><span class="st">&quot;New y label&quot;</span>)<span class="op">+</span><span class="kw">theme_fivethirtyeight</span>()</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-13-1.png" width="672" /> theme_economist():</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
<span class="kw">library</span>(ggthemes)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year,continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> pop_m,<span class="dt">color=</span>continent)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()

gg<span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;A title&quot;</span>, <span class="dt">subtitle =</span> <span class="st">&quot;A subtitle&quot;</span>,<span class="dt">x=</span><span class="st">&quot;New x label&quot;</span>,<span class="dt">y=</span><span class="st">&quot;New y label&quot;</span>)<span class="op">+</span><span class="kw">theme_economist</span>()</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
</div>
</div>
<div id="plotly" class="section level2">
<h2><span class="header-section-number">4.2</span> plotly</h2>
<div id="scatter-plot-1" class="section level3">
<h3><span class="header-section-number">4.2.1</span> scatter plot</h3>
<p>pop_m vs year scatter plot:from 1950 to 2007, world pop increased from 2B to 6B</p>
<p>by continent with color</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(plotly)
<span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year,continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(<span class="dt">data =</span> gapminder2, <span class="dt">x =</span> <span class="op">~</span>year, <span class="dt">y =</span> <span class="op">~</span>pop_m,<span class="dt">color=</span><span class="op">~</span>continent)
p</code></pre></div>
<div id="6374306e938" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="6374306e938">{"x":{"visdat":{"637429f36f0c":["function () ","plotlyVisDat"]},"cur_data":"637429f36f0c","attrs":{"637429f36f0c":{"x":{},"y":{},"color":{},"alpha":1,"sizes":[10,100]}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"title":"year"},"yaxis":{"domain":[0,1],"title":"pop_m"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[237.640501,264.837738,296.516865,335.289489,379.879541,433.061021,499.348587,574.83411,659.081517,743.832984,833.723916,929.539692],"type":"scatter","mode":"markers","name":"Africa","marker":{"fillcolor":"rgba(102,194,165,0.5)","color":"rgba(102,194,165,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[345.152446,386.953916,433.270254,480.746623,529.38421,578.067699,630.29092,682.753971,739.274104,796.90041,849.772762,898.871184],"type":"scatter","mode":"markers","name":"Americas","marker":{"fillcolor":"rgba(252,141,98,0.5)","color":"rgba(252,141,98,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[1395.357351,1562.780599,1696.357182,1905.6629,2150.972248,2384.513556,2610.135582,2871.220762,3133.292191,3383.2855,3601.802203,3811.953827],"type":"scatter","mode":"markers","name":"Asia","marker":{"fillcolor":"rgba(141,160,203,0.5)","color":"rgba(141,160,203,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[418.120846,437.890351,460.355155,481.178958,500.635059,517.164531,531.266901,543.09416,558.142797,568.944148,578.223869,586.098529],"type":"scatter","mode":"markers","name":"Europe","marker":{"fillcolor":"rgba(231,138,195,0.5)","color":"rgba(231,138,195,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[10.686006,11.941976,13.283518,14.600414,16.1061,17.239,18.39485,19.574415,20.919651,22.24143,23.454829,24.549947],"type":"scatter","mode":"markers","name":"Oceania","marker":{"fillcolor":"rgba(166,216,84,0.5)","color":"rgba(166,216,84,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
<p>by pop_m with size</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(plotly)
<span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year,continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(<span class="dt">data =</span> gapminder2, <span class="dt">x =</span> <span class="op">~</span>year, <span class="dt">y =</span> <span class="op">~</span>pop_m,<span class="dt">size=</span><span class="op">~</span>pop_m)
p</code></pre></div>
<div id="63747c022d4b" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="63747c022d4b">{"x":{"visdat":{"637456797154":["function () ","plotlyVisDat"]},"cur_data":"637456797154","attrs":{"637456797154":{"x":{},"y":{},"size":{},"alpha":1,"sizes":[10,100]}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"title":"year"},"yaxis":{"domain":[0,1],"title":"pop_m"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[1952,1952,1952,1952,1952,1957,1957,1957,1957,1957,1962,1962,1962,1962,1962,1967,1967,1967,1967,1967,1972,1972,1972,1972,1972,1977,1977,1977,1977,1977,1982,1982,1982,1982,1982,1987,1987,1987,1987,1987,1992,1992,1992,1992,1992,1997,1997,1997,1997,1997,2002,2002,2002,2002,2002,2007,2007,2007,2007,2007],"y":[237.640501,345.152446,1395.357351,418.120846,10.686006,264.837738,386.953916,1562.780599,437.890351,11.941976,296.516865,433.270254,1696.357182,460.355155,13.283518,335.289489,480.746623,1905.6629,481.178958,14.600414,379.879541,529.38421,2150.972248,500.635059,16.1061,433.061021,578.067699,2384.513556,517.164531,17.239,499.348587,630.29092,2610.135582,531.266901,18.39485,574.83411,682.753971,2871.220762,543.09416,19.574415,659.081517,739.274104,3133.292191,558.142797,20.919651,743.832984,796.90041,3383.2855,568.944148,22.24143,833.723916,849.772762,3601.802203,578.223869,23.454829,929.539692,898.871184,3811.953827,586.098529,24.549947],"type":"scatter","mode":"markers","marker":{"size":[15.3734452587523,17.9189315295551,42.783909716,19.6465540779375,10,16.0173755065705,18.9086361431622,46.747874642848,20.1146230311879,10.029736736616,16.767420376929,20.0052361767014,49.9104753950458,20.6465067224212,10.0614995025366,17.6854130899713,21.1293014652334,54.8660627167106,21.1395375632492,10.0926787420907,18.7411410389018,22.2808601125398,60.6740831876787,21.6001862658548,10.1283278324419,20.0002823110737,23.4335055498843,66.2034798810352,21.9915431894005,10.1551507254348,21.5697273543936,24.6699587837329,71.5453771890386,22.3254352906064,10.1825169897704,23.3569460903292,25.9120903073038,77.7269111683568,22.6054611556927,10.2104447378269,25.3516139188131,27.2502785669939,83.9317958859495,22.9617573688976,10.2422949640412,27.3582160287359,28.6146569229067,89.8507152753444,23.2174935168821,10.2735898150229,29.4865017115562,29.8664791843405,95.0243847446076,23.4372030794091,10.3023186273936,31.755065844912,31.0289487045328,100,23.6236459804025,10.3282469819955],"sizemode":"area","fillcolor":"rgba(31,119,180,1)","color":"rgba(31,119,180,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
<p>by pop_m with symbol</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(plotly)
<span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year,continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(<span class="dt">data =</span> gapminder2, <span class="dt">x =</span> <span class="op">~</span>year, <span class="dt">y =</span> <span class="op">~</span>pop_m,<span class="dt">symbol=</span><span class="op">~</span>continent)
p</code></pre></div>
<div id="63741bc3173" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="63741bc3173">{"x":{"visdat":{"63746d9875df":["function () ","plotlyVisDat"]},"cur_data":"63746d9875df","attrs":{"63746d9875df":{"x":{},"y":{},"symbol":{},"alpha":1,"sizes":[10,100]}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"title":"year"},"yaxis":{"domain":[0,1],"title":"pop_m"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[237.640501,264.837738,296.516865,335.289489,379.879541,433.061021,499.348587,574.83411,659.081517,743.832984,833.723916,929.539692],"type":"scatter","mode":"markers","name":"Africa","marker":{"symbol":"circle","fillcolor":"rgba(31,119,180,1)","color":"rgba(31,119,180,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[345.152446,386.953916,433.270254,480.746623,529.38421,578.067699,630.29092,682.753971,739.274104,796.90041,849.772762,898.871184],"type":"scatter","mode":"markers","name":"Americas","marker":{"symbol":"triangle-up","fillcolor":"rgba(255,127,14,1)","color":"rgba(255,127,14,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[1395.357351,1562.780599,1696.357182,1905.6629,2150.972248,2384.513556,2610.135582,2871.220762,3133.292191,3383.2855,3601.802203,3811.953827],"type":"scatter","mode":"markers","name":"Asia","marker":{"symbol":"square","fillcolor":"rgba(44,160,44,1)","color":"rgba(44,160,44,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[418.120846,437.890351,460.355155,481.178958,500.635059,517.164531,531.266901,543.09416,558.142797,568.944148,578.223869,586.098529],"type":"scatter","mode":"markers","name":"Europe","marker":{"symbol":"cross-thin-open","fillcolor":"rgba(214,39,40,1)","color":"rgba(214,39,40,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[10.686006,11.941976,13.283518,14.600414,16.1061,17.239,18.39485,19.574415,20.919651,22.24143,23.454829,24.549947],"type":"scatter","mode":"markers","name":"Oceania","marker":{"symbol":"square-x-open","fillcolor":"rgba(148,103,189,1)","color":"rgba(148,103,189,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
</div>
<div id="line-plot-1" class="section level3">
<h3><span class="header-section-number">4.2.2</span> line plot</h3>
<p>pop_m vs year line plot:from 1950 to 2007, world pop increased from 2B to 6B</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(gapminder2, <span class="dt">x =</span> <span class="op">~</span>year, <span class="dt">y =</span> <span class="op">~</span>pop_m, <span class="dt">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="dt">mode =</span> <span class="st">&#39;lines+markers&#39;</span>)
p</code></pre></div>
<div id="63742f007b9" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="63742f007b9">{"x":{"visdat":{"637438b03631":["function () ","plotlyVisDat"]},"cur_data":"637438b03631","attrs":{"637438b03631":{"x":{},"y":{},"mode":"lines+markers","alpha":1,"sizes":[10,100],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"title":"year"},"yaxis":{"domain":[0,1],"title":"pop_m"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[2406.95715,2664.40458,2899.782974,3217.478384,3576.977158,3930.045807,4289.43684,4691.477418,5110.71026,5515.204472,5886.977579,6251.013179],"mode":"lines+markers","type":"scatter","line":{"fillcolor":"rgba(31,119,180,1)","color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
<p>by continent with color</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(plotly)
<span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year,continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(<span class="dt">data =</span> <span class="kw">ungroup</span>(gapminder2), <span class="dt">x =</span> <span class="op">~</span>year, <span class="dt">y =</span> <span class="op">~</span>pop_m,<span class="dt">color=</span><span class="op">~</span>continent,<span class="dt">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="dt">mode =</span> <span class="st">&#39;lines+markers&#39;</span>)
p</code></pre></div>
<div id="6374321970ce" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="6374321970ce">{"x":{"visdat":{"637410985c54":["function () ","plotlyVisDat"]},"cur_data":"637410985c54","attrs":{"637410985c54":{"x":{},"y":{},"mode":"lines+markers","color":{},"alpha":1,"sizes":[10,100],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"title":"year"},"yaxis":{"domain":[0,1],"title":"pop_m"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[237.640501,264.837738,296.516865,335.289489,379.879541,433.061021,499.348587,574.83411,659.081517,743.832984,833.723916,929.539692],"mode":"lines+markers","type":"scatter","name":"Africa","line":{"fillcolor":"rgba(102,194,165,0.5)","color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[345.152446,386.953916,433.270254,480.746623,529.38421,578.067699,630.29092,682.753971,739.274104,796.90041,849.772762,898.871184],"mode":"lines+markers","type":"scatter","name":"Americas","line":{"fillcolor":"rgba(252,141,98,0.5)","color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[1395.357351,1562.780599,1696.357182,1905.6629,2150.972248,2384.513556,2610.135582,2871.220762,3133.292191,3383.2855,3601.802203,3811.953827],"mode":"lines+markers","type":"scatter","name":"Asia","line":{"fillcolor":"rgba(141,160,203,0.5)","color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[418.120846,437.890351,460.355155,481.178958,500.635059,517.164531,531.266901,543.09416,558.142797,568.944148,578.223869,586.098529],"mode":"lines+markers","type":"scatter","name":"Europe","line":{"fillcolor":"rgba(231,138,195,0.5)","color":"rgba(231,138,195,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[10.686006,11.941976,13.283518,14.600414,16.1061,17.239,18.39485,19.574415,20.919651,22.24143,23.454829,24.549947],"mode":"lines+markers","type":"scatter","name":"Oceania","line":{"fillcolor":"rgba(166,216,84,0.5)","color":"rgba(166,216,84,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
<p>Add one more line with another variable</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>),<span class="dt">pop_m_haft=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>)<span class="op">/</span><span class="dv">2</span>)
p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(gapminder2, <span class="dt">x =</span> <span class="op">~</span>year, <span class="dt">y =</span> <span class="op">~</span>pop_m, <span class="dt">name =</span> <span class="st">&#39;pop_m&#39;</span>,<span class="dt">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="dt">mode =</span> <span class="st">&#39;lines+markers&#39;</span>)<span class="op">%&gt;%</span><span class="kw">add_trace</span>(<span class="dt">x =</span> <span class="op">~</span>year, <span class="dt">y =</span> <span class="op">~</span>pop_m_haft, <span class="dt">name =</span> <span class="st">&#39;pop_m_haft&#39;</span>, <span class="dt">mode =</span> <span class="st">&#39;lines+markers&#39;</span>)
p</code></pre></div>
<div id="63744ca27ca6" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="63744ca27ca6">{"x":{"visdat":{"63744d642d91":["function () ","plotlyVisDat"]},"cur_data":"63744d642d91","attrs":{"63744d642d91":{"x":{},"y":{},"name":"pop_m","mode":"lines+markers","alpha":1,"sizes":[10,100],"type":"scatter"},"63744d642d91.1":{"x":{},"y":{},"name":"pop_m_haft","mode":"lines+markers","alpha":1,"sizes":[10,100],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"title":"year"},"yaxis":{"domain":[0,1],"title":"pop_m"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[2406.95715,2664.40458,2899.782974,3217.478384,3576.977158,3930.045807,4289.43684,4691.477418,5110.71026,5515.204472,5886.977579,6251.013179],"name":"pop_m","mode":"lines+markers","type":"scatter","line":{"fillcolor":"rgba(31,119,180,1)","color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[1203.478575,1332.20229,1449.891487,1608.739192,1788.488579,1965.0229035,2144.71842,2345.738709,2555.35513,2757.602236,2943.4887895,3125.5065895],"name":"pop_m_haft","mode":"lines+markers","type":"scatter","line":{"fillcolor":"rgba(255,127,14,1)","color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
</div>
<div id="bar-plot" class="section level3">
<h3><span class="header-section-number">4.2.3</span> bar plot</h3>
<p>pop_m vs continent bar plot:At 2007, Asia have most pop 3.8B</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">filter</span>(year<span class="op">==</span><span class="dv">2007</span>)<span class="op">%&gt;%</span><span class="kw">group_by</span>(continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(gapminder2, <span class="dt">x =</span> <span class="op">~</span>continent, <span class="dt">y =</span> <span class="op">~</span>pop_m, <span class="dt">type =</span> <span class="st">&#39;bar&#39;</span>)
p</code></pre></div>
<div id="63744cd92152" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="63744cd92152">{"x":{"visdat":{"63744972596d":["function () ","plotlyVisDat"]},"cur_data":"63744972596d","attrs":{"63744972596d":{"x":{},"y":{},"alpha":1,"sizes":[10,100],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"title":"continent","type":"category","categoryorder":"array","categoryarray":["Africa","Americas","Asia","Europe","Oceania"]},"yaxis":{"domain":[0,1],"title":"pop_m"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":["Africa","Americas","Asia","Europe","Oceania"],"y":[929.539692,898.871184,3811.953827,586.098529,24.549947],"type":"bar","marker":{"fillcolor":"rgba(31,119,180,1)","color":"rgba(31,119,180,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
</div>
<div id="dot-plot-1" class="section level3">
<h3><span class="header-section-number">4.2.4</span> Dot plot</h3>
<p>pop_m vs continent bar plot:At 2007, Asia have most pop 3.8B</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">filter</span>(year<span class="op">==</span><span class="dv">2007</span>)<span class="op">%&gt;%</span><span class="kw">group_by</span>(continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>),<span class="dt">pop_m_half=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>)<span class="op">/</span><span class="dv">2</span>)
p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(gapminder2, <span class="dt">x =</span> <span class="op">~</span>pop_m, <span class="dt">y =</span> <span class="op">~</span>continent, <span class="dt">name =</span> <span class="st">&quot;pop_m&quot;</span>, <span class="dt">type =</span> <span class="st">&#39;scatter&#39;</span>,
             <span class="dt">mode =</span> <span class="st">&quot;markers&quot;</span>, <span class="dt">marker =</span> <span class="kw">list</span>(<span class="dt">color =</span> <span class="st">&quot;pink&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">add_trace</span>(<span class="dt">x =</span> <span class="op">~</span>pop_m_half, <span class="dt">y =</span> <span class="op">~</span>continent, <span class="dt">name =</span> <span class="st">&quot;pop_m_half&quot;</span>,<span class="dt">type =</span> <span class="st">&#39;scatter&#39;</span>,
            <span class="dt">mode =</span> <span class="st">&quot;markers&quot;</span>, <span class="dt">marker =</span> <span class="kw">list</span>(<span class="dt">color =</span> <span class="st">&quot;blue&quot;</span>))
p</code></pre></div>
<div id="63747c4a141d" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="63747c4a141d">{"x":{"visdat":{"637443ba28e7":["function () ","plotlyVisDat"]},"cur_data":"637443ba28e7","attrs":{"637443ba28e7":{"x":{},"y":{},"name":"pop_m","mode":"markers","marker":{"color":"pink"},"alpha":1,"sizes":[10,100],"type":"scatter"},"637443ba28e7.1":{"x":{},"y":{},"name":"pop_m_half","mode":"markers","marker":{"color":"blue"},"alpha":1,"sizes":[10,100],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"title":"pop_m"},"yaxis":{"domain":[0,1],"title":"continent","type":"category","categoryorder":"array","categoryarray":["Africa","Americas","Asia","Europe","Oceania"]},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[929.539692,898.871184,3811.953827,586.098529,24.549947],"y":["Africa","Americas","Asia","Europe","Oceania"],"name":"pop_m","mode":"markers","marker":{"fillcolor":"rgba(31,119,180,1)","color":"pink","line":{"color":"transparent"}},"type":"scatter","xaxis":"x","yaxis":"y","frame":null},{"x":[464.769846,449.435592,1905.9769135,293.0492645,12.2749735],"y":["Africa","Americas","Asia","Europe","Oceania"],"name":"pop_m_half","mode":"markers","marker":{"fillcolor":"rgba(255,127,14,1)","color":"blue","line":{"color":"transparent"}},"type":"scatter","xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
</div>
<div id="histogram-1" class="section level3">
<h3><span class="header-section-number">4.2.5</span> histogram</h3>
<p>pop_m histogram:At 2007, most of the countries under 500M pop,two countries over 1000M pop.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">filter</span>(year<span class="op">==</span><span class="dv">2007</span>)<span class="op">%&gt;%</span><span class="kw">mutate</span>(<span class="dt">pop_m=</span>pop<span class="op">/</span><span class="dv">1000000</span>)
p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(<span class="dt">data=</span>gapminder2,<span class="dt">x =</span> <span class="op">~</span>pop_m, <span class="dt">type =</span> <span class="st">&quot;histogram&quot;</span>)
p</code></pre></div>
<div id="637439c010ea" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="637439c010ea">{"x":{"visdat":{"63742d569ef":["function () ","plotlyVisDat"]},"cur_data":"63742d569ef","attrs":{"63742d569ef":{"x":{},"alpha":1,"sizes":[10,100],"type":"histogram"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"title":"pop_m"},"yaxis":{"domain":[0,1]},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[31.889923,3.600523,33.333216,12.420476,40.301927,20.434176,8.199783,0.708573,150.448339,10.392226,8.078314,9.119152,4.552198,1.639131,190.010647,7.322858,14.326203,8.390505,14.131858,17.696293,33.390141,4.369038,10.238807,16.284741,1318.683096,44.22755,0.71096,64.606759,3.80061,4.133884,18.013409,4.493312,11.416987,10.228744,5.46812,0.496374,9.319622,13.75568,80.264543,6.939688,0.551201,4.906585,76.511887,5.23846,61.083916,1.454867,1.688359,82.400996,22.873338,10.70629,12.572928,9.947814,1.472041,8.502814,7.483763,6.980412,9.956108,0.301931,1110.396331,223.547,69.45357,27.499638,4.109086,6.426679,58.147733,2.780132,127.467972,6.053193,35.610177,23.301725,49.04479,2.505559,3.921278,2.012649,3.193942,6.036914,19.167654,13.327079,24.821286,12.031795,3.270065,1.250882,108.700891,2.874127,0.684736,33.757175,19.951656,47.76198,2.05508,28.90179,16.570613,4.115771,5.675356,12.894865,135.031164,4.627926,3.204897,169.270617,3.242173,6.667147,28.674757,91.077287,38.518241,10.642836,3.942491,0.798094,22.276056,8.860588,0.199579,27.601038,12.267493,10.150265,6.144562,4.553009,5.447502,2.009245,9.118773,43.997828,40.448191,20.378239,42.292929,1.133066,9.031088,7.554661,19.314747,23.174294,38.13964,65.068149,5.701579,1.056608,10.276158,71.158647,29.170398,60.776238,301.139947,3.447496,26.084662,85.262356,4.018332,22.211743,11.746035,12.311143],"type":"histogram","marker":{"fillcolor":"rgba(31,119,180,1)","color":"rgba(31,119,180,1)","line":{"color":"transparent"}},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
</div>
<div id="boxplot-1" class="section level3">
<h3><span class="header-section-number">4.2.6</span> Boxplot</h3>
<p>pop_m Boxplot:At 2007, most of the countries under 500M pop,two countries over 1000M pop.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(<span class="dt">data=</span>gapminder2,<span class="dt">y =</span> <span class="op">~</span>pop_m, <span class="dt">type =</span> <span class="st">&quot;box&quot;</span>)
p</code></pre></div>
<div id="637446e7bcd" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="637446e7bcd">{"x":{"visdat":{"63742e503328":["function () ","plotlyVisDat"]},"cur_data":"63742e503328","attrs":{"63742e503328":{"y":{},"alpha":1,"sizes":[10,100],"type":"box"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"yaxis":{"domain":[0,1],"title":"pop_m"},"xaxis":{"domain":[0,1]},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"y":[31.889923,3.600523,33.333216,12.420476,40.301927,20.434176,8.199783,0.708573,150.448339,10.392226,8.078314,9.119152,4.552198,1.639131,190.010647,7.322858,14.326203,8.390505,14.131858,17.696293,33.390141,4.369038,10.238807,16.284741,1318.683096,44.22755,0.71096,64.606759,3.80061,4.133884,18.013409,4.493312,11.416987,10.228744,5.46812,0.496374,9.319622,13.75568,80.264543,6.939688,0.551201,4.906585,76.511887,5.23846,61.083916,1.454867,1.688359,82.400996,22.873338,10.70629,12.572928,9.947814,1.472041,8.502814,7.483763,6.980412,9.956108,0.301931,1110.396331,223.547,69.45357,27.499638,4.109086,6.426679,58.147733,2.780132,127.467972,6.053193,35.610177,23.301725,49.04479,2.505559,3.921278,2.012649,3.193942,6.036914,19.167654,13.327079,24.821286,12.031795,3.270065,1.250882,108.700891,2.874127,0.684736,33.757175,19.951656,47.76198,2.05508,28.90179,16.570613,4.115771,5.675356,12.894865,135.031164,4.627926,3.204897,169.270617,3.242173,6.667147,28.674757,91.077287,38.518241,10.642836,3.942491,0.798094,22.276056,8.860588,0.199579,27.601038,12.267493,10.150265,6.144562,4.553009,5.447502,2.009245,9.118773,43.997828,40.448191,20.378239,42.292929,1.133066,9.031088,7.554661,19.314747,23.174294,38.13964,65.068149,5.701579,1.056608,10.276158,71.158647,29.170398,60.776238,301.139947,3.447496,26.084662,85.262356,4.018332,22.211743,11.746035,12.311143],"type":"box","line":{"fillcolor":"rgba(31,119,180,1)","color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
</div>
<div id="map" class="section level3">
<h3><span class="header-section-number">4.2.7</span> Map</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(plotly)
df &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/plotly/datasets/master/2011_us_ag_exports.csv&quot;</span>)
df<span class="op">$</span>hover &lt;-<span class="st"> </span><span class="kw">with</span>(df, <span class="kw">paste</span>(state, <span class="st">&#39;&lt;br&gt;&#39;</span>, <span class="st">&quot;Beef&quot;</span>, beef, <span class="st">&quot;Dairy&quot;</span>, dairy, <span class="st">&quot;&lt;br&gt;&quot;</span>,
                           <span class="st">&quot;Fruits&quot;</span>, total.fruits, <span class="st">&quot;Veggies&quot;</span>, total.veggies,
                           <span class="st">&quot;&lt;br&gt;&quot;</span>, <span class="st">&quot;Wheat&quot;</span>, wheat, <span class="st">&quot;Corn&quot;</span>, corn))

<span class="co"># give state boundaries a white border</span>
l &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">color =</span> <span class="kw">toRGB</span>(<span class="st">&quot;white&quot;</span>), <span class="dt">width =</span> <span class="dv">2</span>)
<span class="co"># specify some map projection/options</span>
g &lt;-<span class="st"> </span><span class="kw">list</span>(
  <span class="dt">scope =</span> <span class="st">&#39;usa&#39;</span>,
  <span class="dt">projection =</span> <span class="kw">list</span>(<span class="dt">type =</span> <span class="st">&#39;albers usa&#39;</span>),
  <span class="dt">showlakes =</span> <span class="ot">TRUE</span>,
  <span class="dt">lakecolor =</span> <span class="kw">toRGB</span>(<span class="st">&#39;white&#39;</span>)
)

p &lt;-<span class="st"> </span><span class="kw">plot_geo</span>(df, <span class="dt">locationmode =</span> <span class="st">&#39;USA-states&#39;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">add_trace</span>(
    <span class="dt">z =</span> <span class="op">~</span>total.exports, <span class="dt">text =</span> <span class="op">~</span>hover, <span class="dt">locations =</span> <span class="op">~</span>code,
    <span class="dt">color =</span> <span class="op">~</span>total.exports, <span class="dt">colors =</span> <span class="st">&#39;Purples&#39;</span>
  ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">colorbar</span>(<span class="dt">title =</span> <span class="st">&quot;Millions USD&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">layout</span>(
    <span class="dt">title =</span> <span class="st">&#39;2011 US Agriculture Exports by State&lt;br&gt;(Hover for breakdown)&#39;</span>,
    <span class="dt">geo =</span> g
  )
p</code></pre></div>
<p><div id="6374645d38e7" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="6374645d38e7">{"x":{"visdat":{"63746dab5be2":["function () ","plotlyVisDat"]},"cur_data":"63746dab5be2","attrs":{"63746dab5be2":{"locationmode":"USA-states","alpha":1,"sizes":[10,100],"z":{},"text":{},"locations":{},"color":{},"colors":"Purples"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"mapType":"geo","scene":{"zaxis":{"title":"total.exports"}},"geo":{"domain":{"x":[0,1],"y":[0,1]},"scope":"usa","projection":{"type":"albers usa"},"showlakes":true,"lakecolor":"rgba(255,255,255,1)"},"hovermode":"closest","showlegend":false,"legend":{"y":0.5,"yanchor":"top"},"title":"2011 US Agriculture Exports by State<br>(Hover for breakdown)"},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"colorbar":{"title":"Millions USD","ticklen":2,"len":0.5,"y":1,"lenmode":"fraction","yanchor":"top"},"colorscale":[["0","rgba(252,251,253,1)"],["0.00379675268957006","rgba(252,251,253,1)"],["0.00789414101745469","rgba(251,250,252,1)"],["0.0143813750906008","rgba(251,249,252,1)"],["0.0161423820103846","rgba(250,249,252,1)"],["0.0210968198642694","rgba(250,249,252,1)"],["0.0274510512729069","rgba(249,248,251,1)"],["0.0423218073133138","rgba(248,246,250,1)"],["0.0600746759078963","rgba(246,244,249,1)"],["0.0853316641929285","rgba(243,241,248,1)"],["0.0908196568926163","rgba(243,241,247,1)"],["0.101212369662958","rgba(241,240,247,1)"],["0.109944548976674","rgba(241,239,246,1)"],["0.114791880954363","rgba(240,238,246,1)"],["0.122734372769155","rgba(239,237,245,1)"],["0.157280232715679","rgba(234,232,242,1)"],["0.189932462796213","rgba(228,227,240,1)"],["0.224631273275466","rgba(222,222,237,1)"],["0.228156324861464","rgba(222,221,237,1)"],["0.234696795440788","rgba(221,220,236,1)"],["0.240513674820586","rgba(220,219,236,1)"],["0.302515041401446","rgba(205,206,229,1)"],["0.429050951310798","rgba(175,174,211,1)"],["0.524494589874867","rgba(152,148,197,1)"],["1","rgba(63,0,125,1)"]],"showscale":true,"locationmode":"USA-states","z":[1390.63,13.31,1463.17,3586.02,16472.88,1851.33,259.62,282.19,3764.09,2860.84,401.84,2078.89,8709.48,5050.23,11273.76,4589.01,1889.15,1914.23,278.37,692.75,248.65,3164.16,7192.33,2170.8,3933.42,1718,7114.13,139.89,73.06,500.4,751.58,1488.9,3806.05,3761.96,3979.79,1646.41,1794.57,1969.87,31.59,929.93,3770.19,1535.13,6648.22,453.39,180.14,1146.48,3894.81,138.89,3090.23,349.69],"text":["Alabama <br> Beef 34.4 Dairy 4.06 <br> Fruits 25.11 Veggies 14.33 <br> Wheat 70 Corn 34.9","Alaska <br> Beef 0.2 Dairy 0.19 <br> Fruits 0 Veggies 1.56 <br> Wheat 0 Corn 0","Arizona <br> Beef 71.3 Dairy 105.48 <br> Fruits 60.27 Veggies 386.91 <br> Wheat 48.7 Corn 7.3","Arkansas <br> Beef 53.2 Dairy 3.53 <br> Fruits 6.88 Veggies 11.45 <br> Wheat 114.5 Corn 69.5"," California <br> Beef 228.7 Dairy 929.95 <br> Fruits 8736.4 Veggies 2106.79 <br> Wheat 249.3 Corn 34.6","Colorado <br> Beef 261.4 Dairy 71.94 <br> Fruits 17.99 Veggies 118.27 <br> Wheat 400.5 Corn 183.2","Connecticut <br> Beef 1.1 Dairy 9.49 <br> Fruits 13.1 Veggies 11.16 <br> Wheat 0 Corn 0","Delaware <br> Beef 0.4 Dairy 2.3 <br> Fruits 1.53 Veggies 20.03 <br> Wheat 22.9 Corn 26.9","Florida <br> Beef 42.6 Dairy 66.31 <br> Fruits 1371.36 Veggies 450.86 <br> Wheat 1.8 Corn 3.5","Georgia <br> Beef 31 Dairy 38.38 <br> Fruits 233.51 Veggies 154.77 <br> Wheat 65.4 Corn 57.8","Hawaii <br> Beef 4 Dairy 1.16 <br> Fruits 55.51 Veggies 24.83 <br> Wheat 0 Corn 0","Idaho <br> Beef 119.8 Dairy 294.6 <br> Fruits 21.64 Veggies 319.19 <br> Wheat 568.2 Corn 24","Illinois <br> Beef 53.7 Dairy 45.82 <br> Fruits 12.53 Veggies 39.95 <br> Wheat 223.8 Corn 2228.5","Indiana <br> Beef 21.9 Dairy 89.7 <br> Fruits 12.98 Veggies 37.89 <br> Wheat 114 Corn 1123.2","Iowa <br> Beef 289.8 Dairy 107 <br> Fruits 3.24 Veggies 7.1 <br> Wheat 3.1 Corn 2529.8","Kansas <br> Beef 659.3 Dairy 65.45 <br> Fruits 3.11 Veggies 9.32 <br> Wheat 1426.5 Corn 457.3","Kentucky <br> Beef 54.8 Dairy 28.27 <br> Fruits 6.6 Veggies 0 <br> Wheat 149.3 Corn 179.1","Louisiana <br> Beef 19.8 Dairy 6.02 <br> Fruits 17.83 Veggies 17.25 <br> Wheat 78.7 Corn 91.4","Maine <br> Beef 1.4 Dairy 16.18 <br> Fruits 52.01 Veggies 62.9 <br> Wheat 0 Corn 0","Maryland <br> Beef 5.6 Dairy 24.81 <br> Fruits 12.9 Veggies 20.43 <br> Wheat 55.8 Corn 54.1","Massachusetts <br> Beef 0.6 Dairy 5.81 <br> Fruits 80.83 Veggies 21.13 <br> Wheat 0 Corn 0","Michigan <br> Beef 37.7 Dairy 214.82 <br> Fruits 257.69 Veggies 189.96 <br> Wheat 247 Corn 381.5","Minnesota <br> Beef 112.3 Dairy 218.05 <br> Fruits 7.91 Veggies 120.37 <br> Wheat 538.1 Corn 1264.3","Mississippi <br> Beef 12.8 Dairy 5.45 <br> Fruits 17.04 Veggies 27.87 <br> Wheat 102.2 Corn 110","Missouri <br> Beef 137.2 Dairy 34.26 <br> Fruits 13.18 Veggies 17.9 <br> Wheat 161.7 Corn 428.8","Montana <br> Beef 105 Dairy 6.82 <br> Fruits 3.3 Veggies 45.27 <br> Wheat 1198.1 Corn 5.4","Nebraska <br> Beef 762.2 Dairy 30.07 <br> Fruits 2.16 Veggies 53.5 <br> Wheat 292.3 Corn 1735.9","Nevada <br> Beef 21.8 Dairy 16.57 <br> Fruits 1.19 Veggies 27.93 <br> Wheat 5.4 Corn 0","New Hampshire <br> Beef 0.6 Dairy 7.46 <br> Fruits 7.98 Veggies 4.5 <br> Wheat 0 Corn 0","New Jersey <br> Beef 0.8 Dairy 3.37 <br> Fruits 109.45 Veggies 56.54 <br> Wheat 6.7 Corn 10.1","New Mexico <br> Beef 117.2 Dairy 191.01 <br> Fruits 101.9 Veggies 43.88 <br> Wheat 13.9 Corn 11.2","New York <br> Beef 22.2 Dairy 331.8 <br> Fruits 202.56 Veggies 143.37 <br> Wheat 29.9 Corn 106.1","North Carolina <br> Beef 24.8 Dairy 24.9 <br> Fruits 74.47 Veggies 150.45 <br> Wheat 200.3 Corn 92.2","North Dakota <br> Beef 78.5 Dairy 8.14 <br> Fruits 0.25 Veggies 130.79 <br> Wheat 1664.5 Corn 236.1","Ohio <br> Beef 36.2 Dairy 134.57 <br> Fruits 27.21 Veggies 53.53 <br> Wheat 207.4 Corn 535.1","Oklahoma <br> Beef 337.6 Dairy 24.35 <br> Fruits 9.24 Veggies 8.9 <br> Wheat 324.8 Corn 27.5","Oregon <br> Beef 58.8 Dairy 63.66 <br> Fruits 315.04 Veggies 126.5 <br> Wheat 320.3 Corn 11.7","Pennsylvania <br> Beef 50.9 Dairy 280.87 <br> Fruits 89.48 Veggies 38.26 <br> Wheat 41 Corn 112.1","Rhode Island <br> Beef 0.1 Dairy 0.52 <br> Fruits 2.83 Veggies 3.02 <br> Wheat 0 Corn 0","South Carolina <br> Beef 15.2 Dairy 7.62 <br> Fruits 53.45 Veggies 42.66 <br> Wheat 55.3 Corn 32.1","South Dakota <br> Beef 193.5 Dairy 46.77 <br> Fruits 0.8 Veggies 4.06 <br> Wheat 704.5 Corn 643.6","Tennessee <br> Beef 51.1 Dairy 21.18 <br> Fruits 6.23 Veggies 24.67 <br> Wheat 100 Corn 88.8","Texas <br> Beef 961 Dairy 240.55 <br> Fruits 99.9 Veggies 115.23 <br> Wheat 309.7 Corn 167.2","Utah <br> Beef 27.9 Dairy 48.6 <br> Fruits 12.34 Veggies 6.6 <br> Wheat 42.8 Corn 5.3","Vermont <br> Beef 6.2 Dairy 65.98 <br> Fruits 8.01 Veggies 4.05 <br> Wheat 0 Corn 0","Virginia <br> Beef 39.5 Dairy 47.85 <br> Fruits 36.48 Veggies 27.25 <br> Wheat 77.5 Corn 39.5","Washington <br> Beef 59.2 Dairy 154.18 <br> Fruits 1738.57 Veggies 363.79 <br> Wheat 786.3 Corn 29.5","West Virginia <br> Beef 12 Dairy 3.9 <br> Fruits 11.54 Veggies 0 <br> Wheat 1.6 Corn 3.5","Wisconsin <br> Beef 107.3 Dairy 633.6 <br> Fruits 133.8 Veggies 148.99 <br> Wheat 96.7 Corn 460.5","Wyoming <br> Beef 75.1 Dairy 2.89 <br> Fruits 0.17 Veggies 10.23 <br> Wheat 20.7 Corn 9"],"locations":["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"],"type":"choropleth","geo":"geo","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null},{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script> ### Other plot</p>
<p>3D plot:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(plotly)

mtcars<span class="op">$</span>am[<span class="kw">which</span>(mtcars<span class="op">$</span>am <span class="op">==</span><span class="st"> </span><span class="dv">0</span>)] &lt;-<span class="st"> &#39;Automatic&#39;</span>
mtcars<span class="op">$</span>am[<span class="kw">which</span>(mtcars<span class="op">$</span>am <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)] &lt;-<span class="st"> &#39;Manual&#39;</span>
mtcars<span class="op">$</span>am &lt;-<span class="st"> </span><span class="kw">as.factor</span>(mtcars<span class="op">$</span>am)

p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(mtcars, <span class="dt">x =</span> <span class="op">~</span>wt, <span class="dt">y =</span> <span class="op">~</span>hp, <span class="dt">z =</span> <span class="op">~</span>qsec, <span class="dt">color =</span> <span class="op">~</span>am, <span class="dt">colors =</span> <span class="kw">c</span>(<span class="st">&#39;#BF382A&#39;</span>, <span class="st">&#39;#0C4B8E&#39;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">add_markers</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">layout</span>(<span class="dt">scene =</span> <span class="kw">list</span>(<span class="dt">xaxis =</span> <span class="kw">list</span>(<span class="dt">title =</span> <span class="st">&#39;Weight&#39;</span>),
                     <span class="dt">yaxis =</span> <span class="kw">list</span>(<span class="dt">title =</span> <span class="st">&#39;Gross horsepower&#39;</span>),
                     <span class="dt">zaxis =</span> <span class="kw">list</span>(<span class="dt">title =</span> <span class="st">&#39;1/4 mile time&#39;</span>)))
p</code></pre></div>
<div id="63745c185686" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="63745c185686">{"x":{"visdat":{"637468b34452":["function () ","plotlyVisDat"]},"cur_data":"637468b34452","attrs":{"637468b34452":{"x":{},"y":{},"z":{},"color":{},"colors":["#BF382A","#0C4B8E"],"alpha":1,"sizes":[10,100],"type":"scatter3d","mode":"markers"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"scene":{"xaxis":{"title":"Weight"},"yaxis":{"title":"Gross horsepower"},"zaxis":{"title":"1/4 mile time"}},"xaxis":{"domain":[0,1]},"yaxis":{"domain":[0,1]},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[3.215,3.44,3.46,3.57,3.19,3.15,3.44,3.44,4.07,3.73,3.78,5.25,5.424,5.345,2.465,3.52,3.435,3.84,3.845],"y":[110,175,105,245,62,95,123,123,180,180,180,205,215,230,97,150,150,245,175],"z":[19.44,17.02,20.22,15.84,20,22.9,18.3,18.9,17.4,17.6,18,17.98,17.82,17.42,20.01,16.87,17.3,15.41,17.05],"type":"scatter3d","mode":"markers","name":"Automatic","marker":{"fillcolor":"rgba(191,56,42,0.5)","color":"rgba(191,56,42,1)","line":{"color":"transparent"}},"frame":null},{"x":[2.62,2.875,2.32,2.2,1.615,1.835,1.935,2.14,1.513,3.17,2.77,3.57,2.78],"y":[110,110,93,66,52,65,66,91,113,264,175,335,109],"z":[16.46,17.02,18.61,19.47,18.52,19.9,18.9,16.7,16.9,14.5,15.5,14.6,18.6],"type":"scatter3d","mode":"markers","name":"Manual","marker":{"fillcolor":"rgba(12,75,142,0.5)","color":"rgba(12,75,142,1)","line":{"color":"transparent"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
</div>
<div id="settingtitlesubtitlex-labely-label-1" class="section level3">
<h3><span class="header-section-number">4.2.8</span> setting:title,subtitle,x label,y label</h3>
<p>pop_m vs year line plot:from 1950 to 2007, world pop increased from 2B to 6B</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(gapminder2, <span class="dt">x =</span> <span class="op">~</span>year, <span class="dt">y =</span> <span class="op">~</span>pop_m, <span class="dt">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="dt">mode =</span> <span class="st">&#39;lines+markers&#39;</span>)
p<span class="op">%&gt;%</span><span class="kw">layout</span>(<span class="dt">title =</span> <span class="st">&#39;title&#39;</span>
         ,<span class="dt">xaxis =</span> <span class="kw">list</span>(<span class="dt">title =</span> <span class="st">&#39;x lable&#39;</span>)
         ,<span class="dt">yaxis =</span> <span class="kw">list</span>(<span class="dt">title =</span> <span class="st">&#39;y lable&#39;</span>)
          )</code></pre></div>
<div id="63744f96657c" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="63744f96657c">{"x":{"visdat":{"63746588a13":["function () ","plotlyVisDat"]},"cur_data":"63746588a13","attrs":{"63746588a13":{"x":{},"y":{},"mode":"lines+markers","alpha":1,"sizes":[10,100],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"title","xaxis":{"domain":[0,1],"title":"x lable"},"yaxis":{"domain":[0,1],"title":"y lable"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[2406.95715,2664.40458,2899.782974,3217.478384,3576.977158,3930.045807,4289.43684,4691.477418,5110.71026,5515.204472,5886.977579,6251.013179],"mode":"lines+markers","type":"scatter","line":{"fillcolor":"rgba(31,119,180,1)","color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
</div>
<div id="hover-text" class="section level3">
<h3><span class="header-section-number">4.2.9</span> hover text</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))

p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(gapminder2, <span class="dt">x =</span> <span class="op">~</span>year, <span class="dt">y =</span> <span class="op">~</span>pop_m, <span class="dt">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="dt">mode =</span><span class="st">&#39;lines+markers&#39;</span>, <span class="dt">hoverinfo =</span> <span class="st">&#39;text&#39;</span>,<span class="dt">text =</span> <span class="op">~</span><span class="kw">paste</span>(<span class="st">&#39;year is: &#39;</span>, year,<span class="st">&#39;populate is: &#39;</span>,pop_m))
             
p   </code></pre></div>
<div id="6374c671bbf" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="6374c671bbf">{"x":{"visdat":{"63744ce84e1":["function () ","plotlyVisDat"]},"cur_data":"63744ce84e1","attrs":{"63744ce84e1":{"x":{},"y":{},"mode":"lines+markers","hoverinfo":"text","text":{},"alpha":1,"sizes":[10,100],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"title":"year"},"yaxis":{"domain":[0,1],"title":"pop_m"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[2406.95715,2664.40458,2899.782974,3217.478384,3576.977158,3930.045807,4289.43684,4691.477418,5110.71026,5515.204472,5886.977579,6251.013179],"mode":"lines+markers","hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text"],"text":["year is:  1952 populate is:  2406.95715","year is:  1957 populate is:  2664.40458","year is:  1962 populate is:  2899.782974","year is:  1967 populate is:  3217.478384","year is:  1972 populate is:  3576.977158","year is:  1977 populate is:  3930.045807","year is:  1982 populate is:  4289.43684","year is:  1987 populate is:  4691.477418","year is:  1992 populate is:  5110.71026","year is:  1997 populate is:  5515.204472","year is:  2002 populate is:  5886.977579","year is:  2007 populate is:  6251.013179"],"type":"scatter","line":{"fillcolor":"rgba(31,119,180,1)","color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
</div>
<div id="convert-ggplot-to-plotly" class="section level3">
<h3><span class="header-section-number">4.2.10</span> convert ggplot to plotly</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
<span class="kw">library</span>(ggthemes)
gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year,continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> pop_m,<span class="dt">color=</span>continent)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()<span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;A title&quot;</span>, <span class="dt">subtitle =</span> <span class="st">&quot;A subtitle&quot;</span>,<span class="dt">x=</span><span class="st">&quot;New x label&quot;</span>,<span class="dt">y=</span><span class="st">&quot;New y label&quot;</span>)<span class="op">+</span><span class="kw">theme_fivethirtyeight</span>()

p=<span class="kw">ggplotly</span>(gg)
p</code></pre></div>
<div id="63747bf464e1" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="63747bf464e1">{"x":{"data":[{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[237.640501,264.837738,296.516865,335.289489,379.879541,433.061021,499.348587,574.83411,659.081517,743.832984,833.723916,929.539692],"text":["~year: 1952<br />~pop_m:  237.64050<br />~continent: Africa","~year: 1957<br />~pop_m:  264.83774<br />~continent: Africa","~year: 1962<br />~pop_m:  296.51686<br />~continent: Africa","~year: 1967<br />~pop_m:  335.28949<br />~continent: Africa","~year: 1972<br />~pop_m:  379.87954<br />~continent: Africa","~year: 1977<br />~pop_m:  433.06102<br />~continent: Africa","~year: 1982<br />~pop_m:  499.34859<br />~continent: Africa","~year: 1987<br />~pop_m:  574.83411<br />~continent: Africa","~year: 1992<br />~pop_m:  659.08152<br />~continent: Africa","~year: 1997<br />~pop_m:  743.83298<br />~continent: Africa","~year: 2002<br />~pop_m:  833.72392<br />~continent: Africa","~year: 2007<br />~pop_m:  929.53969<br />~continent: Africa"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[345.152446,386.953916,433.270254,480.746623,529.38421,578.067699,630.29092,682.753971,739.274104,796.90041,849.772762,898.871184],"text":["~year: 1952<br />~pop_m:  345.15245<br />~continent: Americas","~year: 1957<br />~pop_m:  386.95392<br />~continent: Americas","~year: 1962<br />~pop_m:  433.27025<br />~continent: Americas","~year: 1967<br />~pop_m:  480.74662<br />~continent: Americas","~year: 1972<br />~pop_m:  529.38421<br />~continent: Americas","~year: 1977<br />~pop_m:  578.06770<br />~continent: Americas","~year: 1982<br />~pop_m:  630.29092<br />~continent: Americas","~year: 1987<br />~pop_m:  682.75397<br />~continent: Americas","~year: 1992<br />~pop_m:  739.27410<br />~continent: Americas","~year: 1997<br />~pop_m:  796.90041<br />~continent: Americas","~year: 2002<br />~pop_m:  849.77276<br />~continent: Americas","~year: 2007<br />~pop_m:  898.87118<br />~continent: Americas"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[1395.357351,1562.780599,1696.357182,1905.6629,2150.972248,2384.513556,2610.135582,2871.220762,3133.292191,3383.2855,3601.802203,3811.953827],"text":["~year: 1952<br />~pop_m: 1395.35735<br />~continent: Asia","~year: 1957<br />~pop_m: 1562.78060<br />~continent: Asia","~year: 1962<br />~pop_m: 1696.35718<br />~continent: Asia","~year: 1967<br />~pop_m: 1905.66290<br />~continent: Asia","~year: 1972<br />~pop_m: 2150.97225<br />~continent: Asia","~year: 1977<br />~pop_m: 2384.51356<br />~continent: Asia","~year: 1982<br />~pop_m: 2610.13558<br />~continent: Asia","~year: 1987<br />~pop_m: 2871.22076<br />~continent: Asia","~year: 1992<br />~pop_m: 3133.29219<br />~continent: Asia","~year: 1997<br />~pop_m: 3383.28550<br />~continent: Asia","~year: 2002<br />~pop_m: 3601.80220<br />~continent: Asia","~year: 2007<br />~pop_m: 3811.95383<br />~continent: Asia"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[418.120846,437.890351,460.355155,481.178958,500.635059,517.164531,531.266901,543.09416,558.142797,568.944148,578.223869,586.098529],"text":["~year: 1952<br />~pop_m:  418.12085<br />~continent: Europe","~year: 1957<br />~pop_m:  437.89035<br />~continent: Europe","~year: 1962<br />~pop_m:  460.35516<br />~continent: Europe","~year: 1967<br />~pop_m:  481.17896<br />~continent: Europe","~year: 1972<br />~pop_m:  500.63506<br />~continent: Europe","~year: 1977<br />~pop_m:  517.16453<br />~continent: Europe","~year: 1982<br />~pop_m:  531.26690<br />~continent: Europe","~year: 1987<br />~pop_m:  543.09416<br />~continent: Europe","~year: 1992<br />~pop_m:  558.14280<br />~continent: Europe","~year: 1997<br />~pop_m:  568.94415<br />~continent: Europe","~year: 2002<br />~pop_m:  578.22387<br />~continent: Europe","~year: 2007<br />~pop_m:  586.09853<br />~continent: Europe"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[10.686006,11.941976,13.283518,14.600414,16.1061,17.239,18.39485,19.574415,20.919651,22.24143,23.454829,24.549947],"text":["~year: 1952<br />~pop_m:   10.68601<br />~continent: Oceania","~year: 1957<br />~pop_m:   11.94198<br />~continent: Oceania","~year: 1962<br />~pop_m:   13.28352<br />~continent: Oceania","~year: 1967<br />~pop_m:   14.60041<br />~continent: Oceania","~year: 1972<br />~pop_m:   16.10610<br />~continent: Oceania","~year: 1977<br />~pop_m:   17.23900<br />~continent: Oceania","~year: 1982<br />~pop_m:   18.39485<br />~continent: Oceania","~year: 1987<br />~pop_m:   19.57442<br />~continent: Oceania","~year: 1992<br />~pop_m:   20.91965<br />~continent: Oceania","~year: 1997<br />~pop_m:   22.24143<br />~continent: Oceania","~year: 2002<br />~pop_m:   23.45483<br />~continent: Oceania","~year: 2007<br />~pop_m:   24.54995<br />~continent: Oceania"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(231,107,243,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(231,107,243,1)"}},"hoveron":"points","name":"Oceania","legendgroup":"Oceania","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":59.1103362391034,"r":19.2,"b":35.9372353673724,"l":48.6894146948942},"plot_bgcolor":"rgba(240,240,240,1)","paper_bgcolor":"rgba(240,240,240,1)","font":{"color":"rgba(60,60,60,1)","family":"sans","size":15.9402241594022},"title":"<b> A title <\/b>","titlefont":{"color":"rgba(60,60,60,1)","family":"sans","size":23.9103362391034},"xaxis":{"domain":[0,1],"type":"linear","autorange":false,"range":[1949.25,2009.75],"tickmode":"array","ticktext":["1950","1960","1970","1980","1990","2000"],"tickvals":[1950,1960,1970,1980,1990,2000],"categoryorder":"array","categoryarray":["1950","1960","1970","1980","1990","2000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.98505603985056,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(60,60,60,1)","family":"sans","size":12.7521793275218},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(210,210,210,1)","gridwidth":0.724555643609193,"zeroline":false,"anchor":"y","title":"","titlefont":{"color":null,"family":null,"size":0},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"type":"linear","autorange":false,"range":[-179.37738505,4002.01721805],"tickmode":"array","ticktext":["0","1000","2000","3000","4000"],"tickvals":[0,1000,2000,3000,4000],"categoryorder":"array","categoryarray":["0","1000","2000","3000","4000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.98505603985056,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(60,60,60,1)","family":"sans","size":12.7521793275218},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(210,210,210,1)","gridwidth":0.724555643609193,"zeroline":false,"anchor":"x","title":"","titlefont":{"color":null,"family":null,"size":0},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"transparent","width":0.724555643609193,"linetype":"none"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(240,240,240,1)","bordercolor":"transparent","borderwidth":2.06156048675734,"font":{"color":"rgba(60,60,60,1)","family":"sans","size":12.7521793275218},"y":0.905511811023622},"annotations":[{"text":"continent","x":1.02,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(60,60,60,1)","family":"sans","size":15.9402241594022},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"left","yanchor":"bottom","legendTitle":true}],"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"source":"A","attrs":{"63745f221d41":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"63745f221d41","visdat":{"63745f221d41":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
</div>
</div>
<div id="leaflet" class="section level2">
<h2><span class="header-section-number">4.3</span> leaflet</h2>
<p>leaflet is a javascript library for interactive map for more go to : <a href="https://leafletjs.com/" class="uri">https://leafletjs.com/</a></p>
<p>World map:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(leaflet)
<span class="kw">leaflet</span>() <span class="op">%&gt;%</span><span class="kw">addTiles</span>()</code></pre></div>
<div id="htmlwidget-1ae255d2b6c924b50923" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-1ae255d2b6c924b50923">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]}]},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(leaflet)
<span class="kw">library</span>(ggmap)
location=<span class="kw">geocode</span>( <span class="st">&quot;Raffles City Shanghai&quot;</span> )
<span class="co">#121.4765 ,31.23204 </span>
location<span class="op">$</span>lon=<span class="fl">121.4720</span>
location<span class="op">$</span>lat=<span class="fl">31.2345</span>
m &lt;-<span class="st"> </span><span class="kw">leaflet</span>()<span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">addTiles</span>() <span class="op">%&gt;%</span><span class="st">  </span><span class="co"># Add default OpenStreetMap map tiles</span>
<span class="st">  </span><span class="kw">setView</span>(<span class="dt">lng=</span>location<span class="op">$</span>lon, <span class="dt">lat=</span>location<span class="op">$</span>lat, <span class="dt">zoom =</span> <span class="dv">17</span>) <span class="op">%&gt;%</span>
<span class="kw">addMarkers</span>(<span class="dt">lng=</span>location<span class="op">$</span>lon, <span class="dt">lat=</span>location<span class="op">$</span>lat, <span class="dt">popup=</span><span class="st">&quot;ebay shanghai&quot;</span>)
m</code></pre></div>
<div id="htmlwidget-4319b3d85a03cbbf989c" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-4319b3d85a03cbbf989c">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[31.2345,121.472,null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},"ebay shanghai",null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"setView":[[31.2345,121.472],17,[]],"limits":{"lat":[31.2345,31.2345],"lng":[121.472,121.472]}},"evals":[],"jsHooks":[]}</script>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="clean.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="model.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/TonyFly2000/Bookdown/04-Visualize.Rmd",
"text": "Edit"
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
