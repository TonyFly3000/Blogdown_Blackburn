<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Get R</title>
  <meta name="description" content="This is R book with Get, clean, visualize and model">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Get R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is R book with Get, clean, visualize and model" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Get R" />
  
  <meta name="twitter:description" content="This is R book with Get, clean, visualize and model" />
  

<meta name="author" content="Tony JC Duan">


<meta name="date" content="2018-09-06">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="clean.html">
<link rel="next" href="model.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/detect-resize-0.5.3/jquery.resize.js"></script>
<link href="libs/jquery-ui-1.11.4/jquery-ui.min.css" rel="stylesheet" />
<script src="libs/jquery-ui-1.11.4/jquery-ui.min.js"></script>
<script src="libs/d3-3.5.2/d3.min.js"></script>
<script src="libs/vega-1.4.3/vega.min.js"></script>
<script src="libs/lodash-2.2.1/lodash.min.js"></script>
<script>var lodash = _.noConflict();</script>
<link href="libs/ggvis-0.4.3/css/ggvis.css" rel="stylesheet" />
<script src="libs/ggvis-0.4.3/js/ggvis.js"></script>
<script src="libs/htmlwidgets-1.2/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.8.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.39.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.39.2/plotly-latest.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.2/leaflet.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Get R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#history-of-analytic-software"><i class="fa fa-check"></i><b>1.1</b> History of analytic software</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#install-r-and-rstudio"><i class="fa fa-check"></i><b>1.2</b> Install R and RStudio</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#software-navigation"><i class="fa fa-check"></i><b>1.3</b> Software navigation</a><ul>
<li class="chapter" data-level="1.3.1" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>1.3.1</b> R</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro.html"><a href="intro.html#rstudio"><i class="fa fa-check"></i><b>1.3.2</b> Rstudio</a></li>
<li class="chapter" data-level="1.3.3" data-path="intro.html"><a href="intro.html#rstudio-server"><i class="fa fa-check"></i><b>1.3.3</b> Rstudio server</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#r-version-working-location-and-computer-environment"><i class="fa fa-check"></i><b>1.4</b> R Version , working location and computer environment</a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#r-package"><i class="fa fa-check"></i><b>1.5</b> R Package</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="get.html"><a href="get.html"><i class="fa fa-check"></i><b>2</b> Get</a><ul>
<li class="chapter" data-level="2.1" data-path="get.html"><a href="get.html#connect-with-csvtxt"><i class="fa fa-check"></i><b>2.1</b> Connect with csv/txt</a></li>
<li class="chapter" data-level="2.2" data-path="get.html"><a href="get.html#connect-with-xlsx"><i class="fa fa-check"></i><b>2.2</b> Connect with xlsx</a></li>
<li class="chapter" data-level="2.3" data-path="get.html"><a href="get.html#connect-with-rdsrdatafeather"><i class="fa fa-check"></i><b>2.3</b> Connect with rds/RData/feather</a></li>
<li class="chapter" data-level="2.4" data-path="get.html"><a href="get.html#connect-with-sasstatmatlab-ect"><i class="fa fa-check"></i><b>2.4</b> Connect with sas/stat/matlab ect</a></li>
<li class="chapter" data-level="2.5" data-path="get.html"><a href="get.html#connect-with-database-mysqlsqliteteradatapostgresql"><i class="fa fa-check"></i><b>2.5</b> Connect with database (Mysql;sqlite;teradata;postgresql)</a><ul>
<li class="chapter" data-level="2.5.1" data-path="get.html"><a href="get.html#teradata-with-rjdbc-package"><i class="fa fa-check"></i><b>2.5.1</b> Teradata with RJDBC package</a></li>
<li class="chapter" data-level="2.5.2" data-path="get.html"><a href="get.html#teradata-with-ebaytd-package"><i class="fa fa-check"></i><b>2.5.2</b> Teradata with ebaytd package</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="get.html"><a href="get.html#connect-with-salesforce"><i class="fa fa-check"></i><b>2.6</b> Connect with salesforce</a></li>
<li class="chapter" data-level="2.7" data-path="get.html"><a href="get.html#connect-with-web-crawler"><i class="fa fa-check"></i><b>2.7</b> Connect with Web crawler</a></li>
<li class="chapter" data-level="2.8" data-path="get.html"><a href="get.html#connect-with-api"><i class="fa fa-check"></i><b>2.8</b> Connect with API</a></li>
<li class="chapter" data-level="2.9" data-path="get.html"><a href="get.html#connect-with-big-datahadoopspark"><i class="fa fa-check"></i><b>2.9</b> Connect with Big data(Hadoop;Spark)</a></li>
<li class="chapter" data-level="2.10" data-path="get.html"><a href="get.html#connect-with-other-eg-soundpicturevideo"><i class="fa fa-check"></i><b>2.10</b> Connect with Other eg sound,picture,video</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="clean.html"><a href="clean.html"><i class="fa fa-check"></i><b>3</b> Clean</a><ul>
<li class="chapter" data-level="3.1" data-path="clean.html"><a href="clean.html#working-with-date-and-time"><i class="fa fa-check"></i><b>3.1</b> Working with date and time</a></li>
<li class="chapter" data-level="3.2" data-path="clean.html"><a href="clean.html#working-with-missing-data"><i class="fa fa-check"></i><b>3.2</b> working with missing data</a></li>
<li class="chapter" data-level="3.3" data-path="clean.html"><a href="clean.html#working-with-string"><i class="fa fa-check"></i><b>3.3</b> working with string</a></li>
<li class="chapter" data-level="3.4" data-path="clean.html"><a href="clean.html#fifty-shape-of-data"><i class="fa fa-check"></i><b>3.4</b> Fifty shape of data</a><ul>
<li class="chapter" data-level="3.4.1" data-path="clean.html"><a href="clean.html#dplyr"><i class="fa fa-check"></i><b>3.4.1</b> dplyr</a></li>
<li class="chapter" data-level="3.4.2" data-path="clean.html"><a href="clean.html#apply-family"><i class="fa fa-check"></i><b>3.4.2</b> apply family</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="clean.html"><a href="clean.html#tidey-data"><i class="fa fa-check"></i><b>3.5</b> tidey data</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="visualize.html"><a href="visualize.html"><i class="fa fa-check"></i><b>4</b> Visualize</a><ul>
<li class="chapter" data-level="4.1" data-path="visualize.html"><a href="visualize.html#ggplot2"><i class="fa fa-check"></i><b>4.1</b> ggplot2</a><ul>
<li class="chapter" data-level="4.1.1" data-path="visualize.html"><a href="visualize.html#scatter-plot"><i class="fa fa-check"></i><b>4.1.1</b> scatter plot</a></li>
<li class="chapter" data-level="4.1.2" data-path="visualize.html"><a href="visualize.html#line-plot"><i class="fa fa-check"></i><b>4.1.2</b> line plot</a></li>
<li class="chapter" data-level="4.1.3" data-path="visualize.html"><a href="visualize.html#dot-plot"><i class="fa fa-check"></i><b>4.1.3</b> Dot plot</a></li>
<li class="chapter" data-level="4.1.4" data-path="visualize.html"><a href="visualize.html#histogram"><i class="fa fa-check"></i><b>4.1.4</b> histogram</a></li>
<li class="chapter" data-level="4.1.5" data-path="visualize.html"><a href="visualize.html#boxplot"><i class="fa fa-check"></i><b>4.1.5</b> Boxplot</a></li>
<li class="chapter" data-level="4.1.6" data-path="visualize.html"><a href="visualize.html#other-plot"><i class="fa fa-check"></i><b>4.1.6</b> Other plot</a></li>
<li class="chapter" data-level="4.1.7" data-path="visualize.html"><a href="visualize.html#settingtitlesubtitlex-labely-label"><i class="fa fa-check"></i><b>4.1.7</b> setting:title,subtitle,x label,y label</a></li>
<li class="chapter" data-level="4.1.8" data-path="visualize.html"><a href="visualize.html#themes"><i class="fa fa-check"></i><b>4.1.8</b> themes</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="visualize.html"><a href="visualize.html#ggvis"><i class="fa fa-check"></i><b>4.2</b> ggvis</a><ul>
<li class="chapter" data-level="4.2.1" data-path="visualize.html"><a href="visualize.html#scatter-plot-1"><i class="fa fa-check"></i><b>4.2.1</b> scatter plot</a></li>
<li class="chapter" data-level="4.2.2" data-path="visualize.html"><a href="visualize.html#line-plot-1"><i class="fa fa-check"></i><b>4.2.2</b> line plot</a></li>
<li class="chapter" data-level="4.2.3" data-path="visualize.html"><a href="visualize.html#bar-plot"><i class="fa fa-check"></i><b>4.2.3</b> bar plot</a></li>
<li class="chapter" data-level="4.2.4" data-path="visualize.html"><a href="visualize.html#dot-plot-1"><i class="fa fa-check"></i><b>4.2.4</b> Dot plot</a></li>
<li class="chapter" data-level="4.2.5" data-path="visualize.html"><a href="visualize.html#histogram-1"><i class="fa fa-check"></i><b>4.2.5</b> histogram</a></li>
<li class="chapter" data-level="4.2.6" data-path="visualize.html"><a href="visualize.html#boxplot-1"><i class="fa fa-check"></i><b>4.2.6</b> Boxplot</a></li>
<li class="chapter" data-level="4.2.7" data-path="visualize.html"><a href="visualize.html#other-plot-1"><i class="fa fa-check"></i><b>4.2.7</b> Other plot</a></li>
<li class="chapter" data-level="4.2.8" data-path="visualize.html"><a href="visualize.html#setting"><i class="fa fa-check"></i><b>4.2.8</b> setting</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="visualize.html"><a href="visualize.html#plotly"><i class="fa fa-check"></i><b>4.3</b> plotly</a><ul>
<li class="chapter" data-level="4.3.1" data-path="visualize.html"><a href="visualize.html#scatter-plot-2"><i class="fa fa-check"></i><b>4.3.1</b> scatter plot</a></li>
<li class="chapter" data-level="4.3.2" data-path="visualize.html"><a href="visualize.html#line-plot-2"><i class="fa fa-check"></i><b>4.3.2</b> line plot</a></li>
<li class="chapter" data-level="4.3.3" data-path="visualize.html"><a href="visualize.html#bar-plot-1"><i class="fa fa-check"></i><b>4.3.3</b> bar plot</a></li>
<li class="chapter" data-level="4.3.4" data-path="visualize.html"><a href="visualize.html#dot-plot-2"><i class="fa fa-check"></i><b>4.3.4</b> Dot plot</a></li>
<li class="chapter" data-level="4.3.5" data-path="visualize.html"><a href="visualize.html#histogram-2"><i class="fa fa-check"></i><b>4.3.5</b> histogram</a></li>
<li class="chapter" data-level="4.3.6" data-path="visualize.html"><a href="visualize.html#boxplot-2"><i class="fa fa-check"></i><b>4.3.6</b> Boxplot</a></li>
<li class="chapter" data-level="4.3.7" data-path="visualize.html"><a href="visualize.html#map"><i class="fa fa-check"></i><b>4.3.7</b> Map</a></li>
<li class="chapter" data-level="4.3.8" data-path="visualize.html"><a href="visualize.html#settingtitlesubtitlex-labely-label-1"><i class="fa fa-check"></i><b>4.3.8</b> setting:title,subtitle,x label,y label</a></li>
<li class="chapter" data-level="4.3.9" data-path="visualize.html"><a href="visualize.html#hover-text"><i class="fa fa-check"></i><b>4.3.9</b> hover text</a></li>
<li class="chapter" data-level="4.3.10" data-path="visualize.html"><a href="visualize.html#convert-ggplot-to-plotly"><i class="fa fa-check"></i><b>4.3.10</b> convert ggplot to plotly</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="visualize.html"><a href="visualize.html#leaflet"><i class="fa fa-check"></i><b>4.4</b> leaflet</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="model.html"><a href="model.html"><i class="fa fa-check"></i><b>5</b> Model</a></li>
<li class="chapter" data-level="6" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>6</b> Appendix</a></li>
<li class="chapter" data-level="7" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>7</b> References</a><ul>
<li class="chapter" data-level="7.1" data-path="references.html"><a href="references.html#the-giants"><i class="fa fa-check"></i><b>7.1</b> The Giants</a></li>
<li class="chapter" data-level="7.2" data-path="references.html"><a href="references.html#book"><i class="fa fa-check"></i><b>7.2</b> Book</a></li>
<li class="chapter" data-level="7.3" data-path="references.html"><a href="references.html#other-topic"><i class="fa fa-check"></i><b>7.3</b> Other topic</a><ul>
<li class="chapter" data-level="7.3.1" data-path="references.html"><a href="references.html#shiny"><i class="fa fa-check"></i><b>7.3.1</b> Shiny</a></li>
<li class="chapter" data-level="7.3.2" data-path="references.html"><a href="references.html#r-markdown"><i class="fa fa-check"></i><b>7.3.2</b> R markdown</a></li>
<li class="chapter" data-level="7.3.3" data-path="references.html"><a href="references.html#r-bookdown"><i class="fa fa-check"></i><b>7.3.3</b> R bookdown</a></li>
<li class="chapter" data-level="7.3.4" data-path="references.html"><a href="references.html#r-blogdown"><i class="fa fa-check"></i><b>7.3.4</b> R blogdown</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/TonyFly2000/Bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Get R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="visualize" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Visualize</h1>
<p>Some <em>significant</em> applications are demonstrated in this chapter.</p>
<p>include Visualization package <a href="visualize.html#ggplot2">ggplot2</a> ,<a href="visualize.html#ggvis">ggvis</a>and <a href="visualize.html#plotly">plotly</a></p>
<p><a href="https://www.data-to-viz.com/" class="uri">https://www.data-to-viz.com/</a></p>
<div id="ggplot2" class="section level2">
<h2><span class="header-section-number">4.1</span> ggplot2</h2>
<div id="scatter-plot" class="section level3">
<h3><span class="header-section-number">4.1.1</span> scatter plot</h3>
<p>pop_m vs year scatter plot:from 1950 to 2007, world pop increased from 2B to 6B,Asia 1B to 4B</p>
<p>by continent with color</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year,continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> pop_m,<span class="dt">color=</span>continent)) <span class="op">+</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">gg</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<p>by continent with size</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year,continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> pop_m,<span class="dt">size=</span>continent)) <span class="op">+</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">gg</a></code></pre></div>
<pre><code>## Warning: Using size for a discrete variable is not advised.</code></pre>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>by continent with shape</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year,continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> pop_m,<span class="dt">shape=</span>continent)) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">gg</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Set aesthetics to fixed value</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> pop_m)) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">colour =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">size =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">gg</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
</div>
<div id="line-plot" class="section level3">
<h3><span class="header-section-number">4.1.2</span> line plot</h3>
<p>pop_m vs year line plot:from 1950 to 2007, world pop increased from 2B to 6B</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> pop_m)) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_line</span>()<span class="op">+</span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">gg</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>Add one more line with another variable</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>),<span class="dt">pop_m_haft=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>)<span class="op">/</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb7-5" data-line-number="5"></a>
<a class="sourceLine" id="cb7-6" data-line-number="6">gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> pop_m)) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="st">  </span><span class="kw">geom_line</span>()<span class="op">+</span><span class="kw">geom_point</span>()<span class="op">+</span><span class="kw">geom_line</span>(<span class="dt">data=</span>gapminder2,<span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> pop_m_haft))</a>
<a class="sourceLine" id="cb7-8" data-line-number="8">gg</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-6-1.png" width="672" />
### bar plot</p>
<p>pop_m vs continent bar plot:At 2007, Asia have most pop 3.8B</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb8-4" data-line-number="4">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">filter</span>(year<span class="op">==</span><span class="dv">2007</span>)<span class="op">%&gt;%</span><span class="kw">group_by</span>(continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> continent,<span class="dt">y=</span>pop_m)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_col</span>()</a>
<a class="sourceLine" id="cb8-7" data-line-number="7">gg</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
</div>
<div id="dot-plot" class="section level3">
<h3><span class="header-section-number">4.1.3</span> Dot plot</h3>
<p>pop_m vs continent bar plot:At 2007, Asia have most pop 3.8B</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">filter</span>(year<span class="op">==</span><span class="dv">2007</span>)<span class="op">%&gt;%</span><span class="kw">group_by</span>(continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>),<span class="dt">pop_m_half=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>)<span class="op">/</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb9-5" data-line-number="5">gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> pop_m, <span class="dt">y =</span> continent)) <span class="op">+</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb9-7" data-line-number="7">gg</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
<div id="histogram" class="section level3">
<h3><span class="header-section-number">4.1.4</span> histogram</h3>
<p>pop_m histogram:At 2007, most of the countries under 500M pop,two countries over 1000M pop.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">filter</span>(year<span class="op">==</span><span class="dv">2007</span>)<span class="op">%&gt;%</span><span class="kw">mutate</span>(<span class="dt">pop_m=</span>pop<span class="op">/</span><span class="dv">1000000</span>)</a>
<a class="sourceLine" id="cb10-5" data-line-number="5">gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> pop_m)) <span class="op">+</span><span class="kw">geom_histogram</span>()</a>
<a class="sourceLine" id="cb10-6" data-line-number="6">gg</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
<div id="boxplot" class="section level3">
<h3><span class="header-section-number">4.1.5</span> Boxplot</h3>
<p>pop_m Boxplot:At 2007, most of the countries under 500M pop,two countries over 1000M pop.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb11-4" data-line-number="4">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">filter</span>(year<span class="op">==</span><span class="dv">2007</span>)<span class="op">%&gt;%</span><span class="kw">mutate</span>(<span class="dt">pop_m=</span>pop<span class="op">/</span><span class="dv">1000000</span>)</a>
<a class="sourceLine" id="cb11-5" data-line-number="5">gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span><span class="dv">1</span>, <span class="dt">y=</span>pop_m)) <span class="op">+</span><span class="kw">geom_boxplot</span>()</a>
<a class="sourceLine" id="cb11-6" data-line-number="6">gg</a></code></pre></div>
</div>
<div id="other-plot" class="section level3">
<h3><span class="header-section-number">4.1.6</span> Other plot</h3>
</div>
<div id="settingtitlesubtitlex-labely-label" class="section level3">
<h3><span class="header-section-number">4.1.7</span> setting:title,subtitle,x label,y label</h3>
<p>pop_m vs year line plot:from 1950 to 2007, world pop increased from 2B to 6B</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb12-5" data-line-number="5">gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> pop_m)) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_line</span>()<span class="op">+</span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb12-7" data-line-number="7">gg<span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;A title&quot;</span>, <span class="dt">subtitle =</span> <span class="st">&quot;A subtitle&quot;</span>,<span class="dt">x=</span><span class="st">&quot;New x label&quot;</span>,<span class="dt">y=</span><span class="st">&quot;New y label&quot;</span>)</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
</div>
<div id="themes" class="section level3">
<h3><span class="header-section-number">4.1.8</span> themes</h3>
<p><a href="https://cran.r-project.org/web/packages/ggthemes/vignettes/ggthemes.html" class="uri">https://cran.r-project.org/web/packages/ggthemes/vignettes/ggthemes.html</a></p>
<p>theme_fivethirtyeight:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="kw">library</span>(ggthemes)</a>
<a class="sourceLine" id="cb13-5" data-line-number="5">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year,continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb13-6" data-line-number="6">gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> pop_m,<span class="dt">color=</span>continent)) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="st">  </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb13-8" data-line-number="8"></a>
<a class="sourceLine" id="cb13-9" data-line-number="9">gg<span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;A title&quot;</span>, <span class="dt">subtitle =</span> <span class="st">&quot;A subtitle&quot;</span>,<span class="dt">x=</span><span class="st">&quot;New x label&quot;</span>,<span class="dt">y=</span><span class="st">&quot;New y label&quot;</span>)<span class="op">+</span><span class="kw">theme_fivethirtyeight</span>()</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-12-1.png" width="672" />
theme_economist():</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="kw">library</span>(ggthemes)</a>
<a class="sourceLine" id="cb14-5" data-line-number="5">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year,continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb14-6" data-line-number="6">gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> pop_m,<span class="dt">color=</span>continent)) <span class="op">+</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="st">  </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb14-8" data-line-number="8"></a>
<a class="sourceLine" id="cb14-9" data-line-number="9">gg<span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;A title&quot;</span>, <span class="dt">subtitle =</span> <span class="st">&quot;A subtitle&quot;</span>,<span class="dt">x=</span><span class="st">&quot;New x label&quot;</span>,<span class="dt">y=</span><span class="st">&quot;New y label&quot;</span>)<span class="op">+</span><span class="kw">theme_economist</span>()</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
</div>
</div>
<div id="ggvis" class="section level2">
<h2><span class="header-section-number">4.2</span> ggvis</h2>
<div id="scatter-plot-1" class="section level3">
<h3><span class="header-section-number">4.2.1</span> scatter plot</h3>
<p>pop_m vs year scatter plot:from 1950 to 2007, world pop increased from 2B to 6B,Asia 1B to 4B</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="kw">library</span>(ggvis)</a>
<a class="sourceLine" id="cb15-5" data-line-number="5">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year,continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb15-6" data-line-number="6"></a>
<a class="sourceLine" id="cb15-7" data-line-number="7">gg=<span class="st"> </span><span class="kw">ggvis</span>(gapminder2,<span class="op">~</span>year, <span class="op">~</span>pop_m,<span class="dt">fill =</span> <span class="op">~</span>continent) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">layer_points</span>()</a>
<a class="sourceLine" id="cb15-8" data-line-number="8">gg</a></code></pre></div>
<div id="plot_id590083195-container" class="ggvis-output-container">
<div id="plot_id590083195" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id590083195_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id590083195" data-renderer="svg">SVG</a>
 | 
<a id="plot_id590083195_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id590083195" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id590083195_download" class="ggvis-download" data-plot-id="plot_id590083195">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id590083195_spec = {
  "data": [
    {
      "name": "gapminder20_flat",
      "format": {
        "type": "csv",
        "parse": {
          "year": "number",
          "pop_m": "number"
        }
      },
      "values": "\"continent\",\"year\",\"pop_m\"\n\"Africa\",1952,237.640501\n\"Americas\",1952,345.152446\n\"Asia\",1952,1395.357351\n\"Europe\",1952,418.120846\n\"Oceania\",1952,10.686006\n\"Africa\",1957,264.837738\n\"Americas\",1957,386.953916\n\"Asia\",1957,1562.780599\n\"Europe\",1957,437.890351\n\"Oceania\",1957,11.941976\n\"Africa\",1962,296.516865\n\"Americas\",1962,433.270254\n\"Asia\",1962,1696.357182\n\"Europe\",1962,460.355155\n\"Oceania\",1962,13.283518\n\"Africa\",1967,335.289489\n\"Americas\",1967,480.746623\n\"Asia\",1967,1905.6629\n\"Europe\",1967,481.178958\n\"Oceania\",1967,14.600414\n\"Africa\",1972,379.879541\n\"Americas\",1972,529.38421\n\"Asia\",1972,2150.972248\n\"Europe\",1972,500.635059\n\"Oceania\",1972,16.1061\n\"Africa\",1977,433.061021\n\"Americas\",1977,578.067699\n\"Asia\",1977,2384.513556\n\"Europe\",1977,517.164531\n\"Oceania\",1977,17.239\n\"Africa\",1982,499.348587\n\"Americas\",1982,630.29092\n\"Asia\",1982,2610.135582\n\"Europe\",1982,531.266901\n\"Oceania\",1982,18.39485\n\"Africa\",1987,574.83411\n\"Americas\",1987,682.753971\n\"Asia\",1987,2871.220762\n\"Europe\",1987,543.09416\n\"Oceania\",1987,19.574415\n\"Africa\",1992,659.081517\n\"Americas\",1992,739.274104\n\"Asia\",1992,3133.292191\n\"Europe\",1992,558.142797\n\"Oceania\",1992,20.919651\n\"Africa\",1997,743.832984\n\"Americas\",1997,796.90041\n\"Asia\",1997,3383.2855\n\"Europe\",1997,568.944148\n\"Oceania\",1997,22.24143\n\"Africa\",2002,833.723916\n\"Americas\",2002,849.772762\n\"Asia\",2002,3601.802203\n\"Europe\",2002,578.223869\n\"Oceania\",2002,23.454829\n\"Africa\",2007,929.539692\n\"Americas\",2007,898.871184\n\"Asia\",2007,3811.953827\n\"Europe\",2007,586.098529\n\"Oceania\",2007,24.549947"
    },
    {
      "name": "gapminder20",
      "source": "gapminder20_flat",
      "transform": [
        {
          "type": "treefacet",
          "keys": [
            "data.year"
          ]
        }
      ]
    },
    {
      "name": "scale/fill",
      "format": {
        "type": "csv",
        "parse": {}
      },
      "values": "\"domain\"\n\"Africa\"\n\"Americas\"\n\"Asia\"\n\"Europe\"\n\"Oceania\""
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n1949.25\n2009.75"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n-179.37738505\n4002.01721805"
    }
  ],
  "scales": [
    {
      "name": "fill",
      "type": "ordinal",
      "domain": {
        "data": "scale/fill",
        "field": "data.domain"
      },
      "points": true,
      "sort": false,
      "range": "category10"
    },
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "group",
      "from": {
        "data": "gapminder20"
      },
      "marks": [
        {
          "type": "symbol",
          "properties": {
            "update": {
              "size": {
                "value": 50
              },
              "fill": {
                "scale": "fill",
                "field": "data.continent"
              },
              "x": {
                "scale": "x",
                "field": "data.year"
              },
              "y": {
                "scale": "y",
                "field": "data.pop_m"
              }
            },
            "ggvis": {
              "data": {
                "value": "gapminder20"
              }
            }
          }
        }
      ]
    }
  ],
  "legends": [
    {
      "orient": "right",
      "fill": "fill",
      "title": "continent"
    }
  ],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "year"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "pop_m"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 672,
    "height": 480
  },
  "handlers": null
};
ggvis.getPlot("plot_id590083195").parseSpec(plot_id590083195_spec);
</script>
</div>
<div id="line-plot-1" class="section level3">
<h3><span class="header-section-number">4.2.2</span> line plot</h3>
<p>pop_m vs year line plot:from 1950 to 2007, world pop increased from 2B to 6B</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb16-4" data-line-number="4">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb16-5" data-line-number="5"></a>
<a class="sourceLine" id="cb16-6" data-line-number="6">gg=<span class="st"> </span><span class="kw">ggvis</span>(gapminder2,<span class="op">~</span>year, <span class="op">~</span>pop_m) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">layer_points</span>()<span class="op">%&gt;%</span><span class="st"> </span><span class="kw">layer_smooths</span>()</a>
<a class="sourceLine" id="cb16-7" data-line-number="7">gg</a></code></pre></div>
<div id="plot_id847225104-container" class="ggvis-output-container">
<div id="plot_id847225104" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id847225104_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id847225104" data-renderer="svg">SVG</a>
 | 
<a id="plot_id847225104_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id847225104" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id847225104_download" class="ggvis-download" data-plot-id="plot_id847225104">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id847225104_spec = {
  "data": [
    {
      "name": "gapminder20",
      "format": {
        "type": "csv",
        "parse": {
          "year": "number",
          "pop_m": "number"
        }
      },
      "values": "\"year\",\"pop_m\"\n1952,2406.95715\n1957,2664.40458\n1962,2899.782974\n1967,3217.478384\n1972,3576.977158\n1977,3930.045807\n1982,4289.43684\n1987,4691.477418\n1992,5110.71026\n1997,5515.204472\n2002,5886.977579\n2007,6251.013179"
    },
    {
      "name": "gapminder20/model_prediction1",
      "format": {
        "type": "csv",
        "parse": {
          "pred_": "number",
          "resp_": "number"
        }
      },
      "values": "\"pred_\",\"resp_\"\n1952,2407.89787557353\n1952.69620253165,2439.77780116149\n1953.39240506329,2472.24032199596\n1954.08860759494,2505.29243210419\n1954.78481012658,2538.94112551336\n1955.48101265823,2573.19339625068\n1956.17721518987,2608.05623834336\n1956.87341772152,2643.5366458186\n1957.56962025316,2679.65757470819\n1958.26582278481,2716.43762941678\n1958.96202531646,2753.84970459621\n1959.6582278481,2791.86571336788\n1960.35443037975,2830.45756885324\n1961.05063291139,2869.59718417369\n1961.74683544304,2909.25647245069\n1962.44303797468,2949.45349454976\n1963.13924050633,2990.32072933143\n1963.83544303797,3031.83172288317\n1964.53164556962,3073.94464986527\n1965.22784810127,3116.61768493808\n1965.92405063291,3159.80900276188\n1966.62025316456,3203.47677799701\n1967.3164556962,3247.66727268045\n1968.01265822785,3292.91983182474\n1968.70886075949,3339.16696905348\n1969.40506329114,3386.2063952882\n1970.10126582278,3433.8358214505\n1970.79746835443,3481.8529584619\n1971.49367088608,3530.05551724397\n1972.18987341772,3578.28233091084\n1972.88607594937,3627.11723055653\n1973.58227848101,3676.69742376476\n1974.27848101266,3726.87224442369\n1974.9746835443,3777.49102642155\n1975.67088607595,3828.40310364648\n1976.36708860759,3879.45780998671\n1977.06329113924,3930.50597692402\n1977.75949367089,3981.64392338381\n1978.45569620253,4033.02647897799\n1979.15189873418,4084.68359197143\n1979.84810126582,4136.64521062904\n1980.54430379747,4188.94128321567\n1981.24050632911,4241.60175799624\n1981.93670886076,4294.65658323563\n1982.63291139241,4348.36148921558\n1983.32911392405,4402.90943814504\n1984.0253164557,4458.07726069565\n1984.72151898734,4513.63917747698\n1985.41772151899,4569.36940909852\n1986.11392405063,4625.04217616984\n1986.81012658228,4680.43169930046\n1987.50632911392,4735.79725988999\n1988.20253164557,4792.12017626368\n1988.89873417722,4849.09637052739\n1989.59493670886,4906.35171407355\n1990.29113924051,4963.51207829452\n1990.98734177215,5020.20333458272\n1991.6835443038,5076.05135433053\n1992.37974683544,5130.93451872828\n1993.07594936709,5185.85927768209\n1993.77215189873,5240.89613608996\n1994.46835443038,5295.94984822872\n1995.16455696203,5350.92516837516\n1995.86075949367,5405.72685080609\n1996.55696202532,5460.25964979829\n1997.25316455696,5514.45919217268\n1997.94936708861,5568.58832365099\n1998.64556962025,5622.69618468911\n1999.3417721519,5676.7409758317\n2000.03797468354,5730.68089762335\n2000.73417721519,5784.47415060871\n2001.43037974684,5838.07893533239\n2002.12658227848,5891.45485499772\n2002.82278481013,5944.62725688755\n2003.51898734177,5997.62889679435\n2004.21518987342,6050.46992243069\n2004.91139240506,6103.16048150904\n2005.60759493671,6155.71072174196\n2006.30379746835,6208.13079084193\n2007,6260.43083652149"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n1949.25\n2009.75"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n2214.28346567393\n6453.10452084757"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "symbol",
      "properties": {
        "update": {
          "fill": {
            "value": "#000000"
          },
          "size": {
            "value": 50
          },
          "x": {
            "scale": "x",
            "field": "data.year"
          },
          "y": {
            "scale": "y",
            "field": "data.pop_m"
          }
        },
        "ggvis": {
          "data": {
            "value": "gapminder20"
          }
        }
      },
      "from": {
        "data": "gapminder20"
      }
    },
    {
      "type": "line",
      "properties": {
        "update": {
          "stroke": {
            "value": "#000000"
          },
          "strokeWidth": {
            "value": 2
          },
          "x": {
            "scale": "x",
            "field": "data.pred_"
          },
          "y": {
            "scale": "y",
            "field": "data.resp_"
          },
          "fill": {
            "value": "transparent"
          }
        },
        "ggvis": {
          "data": {
            "value": "gapminder20/model_prediction1"
          }
        }
      },
      "from": {
        "data": "gapminder20/model_prediction1"
      }
    }
  ],
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "year"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "pop_m"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 672,
    "height": 480
  },
  "handlers": null
};
ggvis.getPlot("plot_id847225104").parseSpec(plot_id847225104_spec);
</script>
<p>Add one more line with another variable</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb17-4" data-line-number="4">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>),<span class="dt">pop_m_haft=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>)<span class="op">/</span><span class="dv">2</span>)</a></code></pre></div>
</div>
<div id="bar-plot" class="section level3">
<h3><span class="header-section-number">4.2.3</span> bar plot</h3>
<p>pop_m vs continent bar plot:At 2007, Asia have most pop 3.8B</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb18-4" data-line-number="4">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">filter</span>(year<span class="op">==</span><span class="dv">2007</span>)<span class="op">%&gt;%</span><span class="kw">group_by</span>(continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb18-5" data-line-number="5">gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> continent,<span class="dt">y=</span>pop_m)) <span class="op">+</span></a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_col</span>()</a>
<a class="sourceLine" id="cb18-7" data-line-number="7">gg</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
</div>
<div id="dot-plot-1" class="section level3">
<h3><span class="header-section-number">4.2.4</span> Dot plot</h3>
<p>pop_m vs continent bar plot:At 2007, Asia have most pop 3.8B</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb19-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb19-4" data-line-number="4">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">filter</span>(year<span class="op">==</span><span class="dv">2007</span>)<span class="op">%&gt;%</span><span class="kw">group_by</span>(continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>),<span class="dt">pop_m_half=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>)<span class="op">/</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb19-5" data-line-number="5">gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> pop_m, <span class="dt">y =</span> continent)) <span class="op">+</span></a>
<a class="sourceLine" id="cb19-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb19-7" data-line-number="7">gg</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
</div>
<div id="histogram-1" class="section level3">
<h3><span class="header-section-number">4.2.5</span> histogram</h3>
<p>pop_m histogram:At 2007, most of the countries under 500M pop,two countries over 1000M pop.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb20-4" data-line-number="4">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">filter</span>(year<span class="op">==</span><span class="dv">2007</span>)<span class="op">%&gt;%</span><span class="kw">mutate</span>(<span class="dt">pop_m=</span>pop<span class="op">/</span><span class="dv">1000000</span>)</a>
<a class="sourceLine" id="cb20-5" data-line-number="5">gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> pop_m)) <span class="op">+</span><span class="kw">geom_histogram</span>()</a>
<a class="sourceLine" id="cb20-6" data-line-number="6">gg</a></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
</div>
<div id="boxplot-1" class="section level3">
<h3><span class="header-section-number">4.2.6</span> Boxplot</h3>
<p>pop_m Boxplot:At 2007, most of the countries under 500M pop,two countries over 1000M pop.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb21-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb21-4" data-line-number="4">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">filter</span>(year<span class="op">==</span><span class="dv">2007</span>)<span class="op">%&gt;%</span><span class="kw">mutate</span>(<span class="dt">pop_m=</span>pop<span class="op">/</span><span class="dv">1000000</span>)</a>
<a class="sourceLine" id="cb21-5" data-line-number="5">gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span><span class="dv">1</span>, <span class="dt">y=</span>pop_m)) <span class="op">+</span><span class="kw">geom_boxplot</span>()</a>
<a class="sourceLine" id="cb21-6" data-line-number="6">gg</a></code></pre></div>
</div>
<div id="other-plot-1" class="section level3">
<h3><span class="header-section-number">4.2.7</span> Other plot</h3>
<p>Map</p>
</div>
<div id="setting" class="section level3">
<h3><span class="header-section-number">4.2.8</span> setting</h3>
</div>
</div>
<div id="plotly" class="section level2">
<h2><span class="header-section-number">4.3</span> plotly</h2>
<div id="scatter-plot-2" class="section level3">
<h3><span class="header-section-number">4.3.1</span> scatter plot</h3>
<p>pop_m vs year scatter plot:from 1950 to 2007, world pop increased from 2B to 6B</p>
<p>by continent with color</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="kw">library</span>(plotly)</a>
<a class="sourceLine" id="cb22-2" data-line-number="2"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb22-3" data-line-number="3"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb22-4" data-line-number="4"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb22-5" data-line-number="5">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year,continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb22-6" data-line-number="6">p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(<span class="dt">data =</span> gapminder2, <span class="dt">x =</span> <span class="op">~</span>year, <span class="dt">y =</span> <span class="op">~</span>pop_m,<span class="dt">color=</span><span class="op">~</span>continent)</a>
<a class="sourceLine" id="cb22-7" data-line-number="7">p</a></code></pre></div>
<div id="htmlwidget-d1de97decf238c05bd31" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-d1de97decf238c05bd31">{"x":{"visdat":{"1a243a7a3b3f":["function () ","plotlyVisDat"]},"cur_data":"1a243a7a3b3f","attrs":{"1a243a7a3b3f":{"x":{},"y":{},"color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20]}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"pop_m"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[237.640501,264.837738,296.516865,335.289489,379.879541,433.061021,499.348587,574.83411,659.081517,743.832984,833.723916,929.539692],"type":"scatter","mode":"markers","name":"Africa","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[345.152446,386.953916,433.270254,480.746623,529.38421,578.067699,630.29092,682.753971,739.274104,796.90041,849.772762,898.871184],"type":"scatter","mode":"markers","name":"Americas","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[1395.357351,1562.780599,1696.357182,1905.6629,2150.972248,2384.513556,2610.135582,2871.220762,3133.292191,3383.2855,3601.802203,3811.953827],"type":"scatter","mode":"markers","name":"Asia","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[418.120846,437.890351,460.355155,481.178958,500.635059,517.164531,531.266901,543.09416,558.142797,568.944148,578.223869,586.098529],"type":"scatter","mode":"markers","name":"Europe","marker":{"color":"rgba(231,138,195,1)","line":{"color":"rgba(231,138,195,1)"}},"textfont":{"color":"rgba(231,138,195,1)"},"error_y":{"color":"rgba(231,138,195,1)"},"error_x":{"color":"rgba(231,138,195,1)"},"line":{"color":"rgba(231,138,195,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[10.686006,11.941976,13.283518,14.600414,16.1061,17.239,18.39485,19.574415,20.919651,22.24143,23.454829,24.549947],"type":"scatter","mode":"markers","name":"Oceania","marker":{"color":"rgba(166,216,84,1)","line":{"color":"rgba(166,216,84,1)"}},"textfont":{"color":"rgba(166,216,84,1)"},"error_y":{"color":"rgba(166,216,84,1)"},"error_x":{"color":"rgba(166,216,84,1)"},"line":{"color":"rgba(166,216,84,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
<p>by pop_m with size</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw">library</span>(plotly)</a>
<a class="sourceLine" id="cb23-2" data-line-number="2"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb23-3" data-line-number="3"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb23-4" data-line-number="4"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb23-5" data-line-number="5">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year,continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb23-6" data-line-number="6">p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(<span class="dt">data =</span> gapminder2, <span class="dt">x =</span> <span class="op">~</span>year, <span class="dt">y =</span> <span class="op">~</span>pop_m,<span class="dt">size=</span><span class="op">~</span>pop_m)</a>
<a class="sourceLine" id="cb23-7" data-line-number="7">p</a></code></pre></div>
<pre><code>## Warning: `line.width` does not currently support multiple values.</code></pre>
<div id="htmlwidget-d0b603b159959785edf2" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-d0b603b159959785edf2">{"x":{"visdat":{"1a2435d623f9":["function () ","plotlyVisDat"]},"cur_data":"1a2435d623f9","attrs":{"1a2435d623f9":{"x":{},"y":{},"size":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20]}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"pop_m"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[1952,1952,1952,1952,1952,1957,1957,1957,1957,1957,1962,1962,1962,1962,1962,1967,1967,1967,1967,1967,1972,1972,1972,1972,1972,1977,1977,1977,1977,1977,1982,1982,1982,1982,1982,1987,1987,1987,1987,1987,1992,1992,1992,1992,1992,1997,1997,1997,1997,1997,2002,2002,2002,2002,2002,2007,2007,2007,2007,2007],"y":[237.640501,345.152446,1395.357351,418.120846,10.686006,264.837738,386.953916,1562.780599,437.890351,11.941976,296.516865,433.270254,1696.357182,460.355155,13.283518,335.289489,480.746623,1905.6629,481.178958,14.600414,379.879541,529.38421,2150.972248,500.635059,16.1061,433.061021,578.067699,2384.513556,517.164531,17.239,499.348587,630.29092,2610.135582,531.266901,18.39485,574.83411,682.753971,2871.220762,543.09416,19.574415,659.081517,739.274104,3133.292191,558.142797,20.919651,743.832984,796.90041,3383.2855,568.944148,22.24143,833.723916,849.772762,3601.802203,578.223869,23.454829,929.539692,898.871184,3811.953827,586.098529,24.549947],"type":"scatter","mode":"markers","marker":{"color":"rgba(31,119,180,1)","size":[15.3734452587523,17.9189315295551,42.783909716,19.6465540779375,10,16.0173755065705,18.9086361431622,46.747874642848,20.1146230311879,10.029736736616,16.767420376929,20.0052361767014,49.9104753950458,20.6465067224212,10.0614995025366,17.6854130899713,21.1293014652334,54.8660627167106,21.1395375632492,10.0926787420907,18.7411410389018,22.2808601125398,60.6740831876787,21.6001862658548,10.1283278324419,20.0002823110737,23.4335055498843,66.2034798810352,21.9915431894005,10.1551507254348,21.5697273543936,24.6699587837329,71.5453771890386,22.3254352906064,10.1825169897704,23.3569460903292,25.9120903073038,77.7269111683568,22.6054611556927,10.2104447378269,25.3516139188131,27.2502785669939,83.9317958859495,22.9617573688976,10.2422949640412,27.3582160287359,28.6146569229067,89.8507152753444,23.2174935168821,10.2735898150229,29.4865017115562,29.8664791843405,95.0243847446076,23.4372030794091,10.3023186273936,31.755065844912,31.0289487045328,100,23.6236459804025,10.3282469819955],"sizemode":"area","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"size":[15.3734452587523,17.9189315295551,42.783909716,19.6465540779375,10,16.0173755065705,18.9086361431622,46.747874642848,20.1146230311879,10.029736736616,16.767420376929,20.0052361767014,49.9104753950458,20.6465067224212,10.0614995025366,17.6854130899713,21.1293014652334,54.8660627167106,21.1395375632492,10.0926787420907,18.7411410389018,22.2808601125398,60.6740831876787,21.6001862658548,10.1283278324419,20.0002823110737,23.4335055498843,66.2034798810352,21.9915431894005,10.1551507254348,21.5697273543936,24.6699587837329,71.5453771890386,22.3254352906064,10.1825169897704,23.3569460903292,25.9120903073038,77.7269111683568,22.6054611556927,10.2104447378269,25.3516139188131,27.2502785669939,83.9317958859495,22.9617573688976,10.2422949640412,27.3582160287359,28.6146569229067,89.8507152753444,23.2174935168821,10.2735898150229,29.4865017115562,29.8664791843405,95.0243847446076,23.4372030794091,10.3023186273936,31.755065844912,31.0289487045328,100,23.6236459804025,10.3282469819955]},"error_y":{"color":"rgba(31,119,180,1)","width":[]},"error_x":{"color":"rgba(31,119,180,1)","width":[]},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
<p>by pop_m with symbol</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw">library</span>(plotly)</a>
<a class="sourceLine" id="cb25-2" data-line-number="2"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb25-3" data-line-number="3"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb25-4" data-line-number="4"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb25-5" data-line-number="5">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year,continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb25-6" data-line-number="6">p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(<span class="dt">data =</span> gapminder2, <span class="dt">x =</span> <span class="op">~</span>year, <span class="dt">y =</span> <span class="op">~</span>pop_m,<span class="dt">symbol=</span><span class="op">~</span>continent)</a>
<a class="sourceLine" id="cb25-7" data-line-number="7">p</a></code></pre></div>
<div id="htmlwidget-35054722328857b47e81" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-35054722328857b47e81">{"x":{"visdat":{"1a24444f210e":["function () ","plotlyVisDat"]},"cur_data":"1a24444f210e","attrs":{"1a24444f210e":{"x":{},"y":{},"symbol":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20]}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"pop_m"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[237.640501,264.837738,296.516865,335.289489,379.879541,433.061021,499.348587,574.83411,659.081517,743.832984,833.723916,929.539692],"type":"scatter","mode":"markers","name":"Africa","marker":{"color":"rgba(31,119,180,1)","symbol":"circle","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[345.152446,386.953916,433.270254,480.746623,529.38421,578.067699,630.29092,682.753971,739.274104,796.90041,849.772762,898.871184],"type":"scatter","mode":"markers","name":"Americas","marker":{"color":"rgba(255,127,14,1)","symbol":"triangle-up","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"line":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[1395.357351,1562.780599,1696.357182,1905.6629,2150.972248,2384.513556,2610.135582,2871.220762,3133.292191,3383.2855,3601.802203,3811.953827],"type":"scatter","mode":"markers","name":"Asia","marker":{"color":"rgba(44,160,44,1)","symbol":"square","line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"line":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[418.120846,437.890351,460.355155,481.178958,500.635059,517.164531,531.266901,543.09416,558.142797,568.944148,578.223869,586.098529],"type":"scatter","mode":"markers","name":"Europe","marker":{"color":"rgba(214,39,40,1)","symbol":"cross-thin-open","line":{"color":"rgba(214,39,40,1)"}},"error_y":{"color":"rgba(214,39,40,1)"},"error_x":{"color":"rgba(214,39,40,1)"},"line":{"color":"rgba(214,39,40,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[10.686006,11.941976,13.283518,14.600414,16.1061,17.239,18.39485,19.574415,20.919651,22.24143,23.454829,24.549947],"type":"scatter","mode":"markers","name":"Oceania","marker":{"color":"rgba(148,103,189,1)","symbol":"square-x-open","line":{"color":"rgba(148,103,189,1)"}},"error_y":{"color":"rgba(148,103,189,1)"},"error_x":{"color":"rgba(148,103,189,1)"},"line":{"color":"rgba(148,103,189,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
</div>
<div id="line-plot-2" class="section level3">
<h3><span class="header-section-number">4.3.2</span> line plot</h3>
<p>pop_m vs year line plot:from 1950 to 2007, world pop increased from 2B to 6B</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb26-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb26-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb26-4" data-line-number="4">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb26-5" data-line-number="5">p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(gapminder2, <span class="dt">x =</span> <span class="op">~</span>year, <span class="dt">y =</span> <span class="op">~</span>pop_m, <span class="dt">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="dt">mode =</span> <span class="st">&#39;lines+markers&#39;</span>)</a>
<a class="sourceLine" id="cb26-6" data-line-number="6">p</a></code></pre></div>
<div id="htmlwidget-90518b4106cf5ac01947" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-90518b4106cf5ac01947">{"x":{"visdat":{"1a241ebd5df1":["function () ","plotlyVisDat"]},"cur_data":"1a241ebd5df1","attrs":{"1a241ebd5df1":{"x":{},"y":{},"mode":"lines+markers","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"pop_m"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[2406.95715,2664.40458,2899.782974,3217.478384,3576.977158,3930.045807,4289.43684,4691.477418,5110.71026,5515.204472,5886.977579,6251.013179],"mode":"lines+markers","type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
<p>Add one more line with another variable</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb27-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb27-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb27-4" data-line-number="4">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>),<span class="dt">pop_m_haft=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>)<span class="op">/</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb27-5" data-line-number="5">p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(gapminder2, <span class="dt">x =</span> <span class="op">~</span>year, <span class="dt">y =</span> <span class="op">~</span>pop_m, <span class="dt">name =</span> <span class="st">&#39;pop_m&#39;</span>,<span class="dt">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="dt">mode =</span> <span class="st">&#39;lines+markers&#39;</span>)<span class="op">%&gt;%</span><span class="kw">add_trace</span>(<span class="dt">x =</span> <span class="op">~</span>year, <span class="dt">y =</span> <span class="op">~</span>pop_m_haft, <span class="dt">name =</span> <span class="st">&#39;pop_m_haft&#39;</span>, <span class="dt">mode =</span> <span class="st">&#39;lines+markers&#39;</span>)</a>
<a class="sourceLine" id="cb27-6" data-line-number="6">p</a></code></pre></div>
<div id="htmlwidget-fb91cd990c4107ea091c" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-fb91cd990c4107ea091c">{"x":{"visdat":{"1a243e901063":["function () ","plotlyVisDat"]},"cur_data":"1a243e901063","attrs":{"1a243e901063":{"x":{},"y":{},"mode":"lines+markers","name":"pop_m","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"1a243e901063.1":{"x":{},"y":{},"mode":"lines+markers","name":"pop_m_haft","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"pop_m"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[2406.95715,2664.40458,2899.782974,3217.478384,3576.977158,3930.045807,4289.43684,4691.477418,5110.71026,5515.204472,5886.977579,6251.013179],"mode":"lines+markers","name":"pop_m","type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[1203.478575,1332.20229,1449.891487,1608.739192,1788.488579,1965.0229035,2144.71842,2345.738709,2555.35513,2757.602236,2943.4887895,3125.5065895],"mode":"lines+markers","name":"pop_m_haft","type":"scatter","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"line":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
</div>
<div id="bar-plot-1" class="section level3">
<h3><span class="header-section-number">4.3.3</span> bar plot</h3>
<p>pop_m vs continent bar plot:At 2007, Asia have most pop 3.8B</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb28-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb28-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb28-4" data-line-number="4">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">filter</span>(year<span class="op">==</span><span class="dv">2007</span>)<span class="op">%&gt;%</span><span class="kw">group_by</span>(continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb28-5" data-line-number="5">p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(gapminder2, <span class="dt">x =</span> <span class="op">~</span>continent, <span class="dt">y =</span> <span class="op">~</span>pop_m, <span class="dt">type =</span> <span class="st">&#39;bar&#39;</span>)</a>
<a class="sourceLine" id="cb28-6" data-line-number="6">p</a></code></pre></div>
<div id="htmlwidget-d3112ff0eaca50aeec1b" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-d3112ff0eaca50aeec1b">{"x":{"visdat":{"1a2440335f2e":["function () ","plotlyVisDat"]},"cur_data":"1a2440335f2e","attrs":{"1a2440335f2e":{"x":{},"y":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"continent","type":"category","categoryorder":"array","categoryarray":["Africa","Americas","Asia","Europe","Oceania"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"pop_m"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":["Africa","Americas","Asia","Europe","Oceania"],"y":[929.539692,898.871184,3811.953827,586.098529,24.549947],"type":"bar","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
</div>
<div id="dot-plot-2" class="section level3">
<h3><span class="header-section-number">4.3.4</span> Dot plot</h3>
<p>pop_m vs continent bar plot:At 2007, Asia have most pop 3.8B</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb29-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb29-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb29-4" data-line-number="4">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">filter</span>(year<span class="op">==</span><span class="dv">2007</span>)<span class="op">%&gt;%</span><span class="kw">group_by</span>(continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>),<span class="dt">pop_m_half=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>)<span class="op">/</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb29-5" data-line-number="5">p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(gapminder2, <span class="dt">x =</span> <span class="op">~</span>pop_m, <span class="dt">y =</span> <span class="op">~</span>continent, <span class="dt">name =</span> <span class="st">&quot;pop_m&quot;</span>, <span class="dt">type =</span> <span class="st">&#39;scatter&#39;</span>,</a>
<a class="sourceLine" id="cb29-6" data-line-number="6">             <span class="dt">mode =</span> <span class="st">&quot;markers&quot;</span>, <span class="dt">marker =</span> <span class="kw">list</span>(<span class="dt">color =</span> <span class="st">&quot;pink&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb29-7" data-line-number="7"><span class="st">  </span><span class="kw">add_trace</span>(<span class="dt">x =</span> <span class="op">~</span>pop_m_half, <span class="dt">y =</span> <span class="op">~</span>continent, <span class="dt">name =</span> <span class="st">&quot;pop_m_half&quot;</span>,<span class="dt">type =</span> <span class="st">&#39;scatter&#39;</span>,</a>
<a class="sourceLine" id="cb29-8" data-line-number="8">            <span class="dt">mode =</span> <span class="st">&quot;markers&quot;</span>, <span class="dt">marker =</span> <span class="kw">list</span>(<span class="dt">color =</span> <span class="st">&quot;blue&quot;</span>))</a>
<a class="sourceLine" id="cb29-9" data-line-number="9">p</a></code></pre></div>
<div id="htmlwidget-46ed9d5e801666c40d82" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-46ed9d5e801666c40d82">{"x":{"visdat":{"1a243b95d78":["function () ","plotlyVisDat"]},"cur_data":"1a243b95d78","attrs":{"1a243b95d78":{"x":{},"y":{},"mode":"markers","marker":{"color":"pink"},"name":"pop_m","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"1a243b95d78.1":{"x":{},"y":{},"mode":"markers","marker":{"color":"blue"},"name":"pop_m_half","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"pop_m"},"yaxis":{"domain":[0,1],"automargin":true,"title":"continent","type":"category","categoryorder":"array","categoryarray":["Africa","Americas","Asia","Europe","Oceania"]},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[929.539692,898.871184,3811.953827,586.098529,24.549947],"y":["Africa","Americas","Asia","Europe","Oceania"],"mode":"markers","marker":{"color":"pink","line":{"color":"rgba(31,119,180,1)"}},"name":"pop_m","type":"scatter","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[464.769846,449.435592,1905.9769135,293.0492645,12.2749735],"y":["Africa","Americas","Asia","Europe","Oceania"],"mode":"markers","marker":{"color":"blue","line":{"color":"rgba(255,127,14,1)"}},"name":"pop_m_half","type":"scatter","error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"line":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
</div>
<div id="histogram-2" class="section level3">
<h3><span class="header-section-number">4.3.5</span> histogram</h3>
<p>pop_m histogram:At 2007, most of the countries under 500M pop,two countries over 1000M pop.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb30-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb30-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb30-4" data-line-number="4">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">filter</span>(year<span class="op">==</span><span class="dv">2007</span>)<span class="op">%&gt;%</span><span class="kw">mutate</span>(<span class="dt">pop_m=</span>pop<span class="op">/</span><span class="dv">1000000</span>)</a>
<a class="sourceLine" id="cb30-5" data-line-number="5">p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(<span class="dt">data=</span>gapminder2,<span class="dt">x =</span> <span class="op">~</span>pop_m, <span class="dt">type =</span> <span class="st">&quot;histogram&quot;</span>)</a>
<a class="sourceLine" id="cb30-6" data-line-number="6">p</a></code></pre></div>
<div id="htmlwidget-60efe8d302b263c1d5f3" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-60efe8d302b263c1d5f3">{"x":{"visdat":{"1a24bc6225e":["function () ","plotlyVisDat"]},"cur_data":"1a24bc6225e","attrs":{"1a24bc6225e":{"x":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"histogram"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"pop_m"},"yaxis":{"domain":[0,1],"automargin":true},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[31.889923,3.600523,33.333216,12.420476,40.301927,20.434176,8.199783,0.708573,150.448339,10.392226,8.078314,9.119152,4.552198,1.639131,190.010647,7.322858,14.326203,8.390505,14.131858,17.696293,33.390141,4.369038,10.238807,16.284741,1318.683096,44.22755,0.71096,64.606759,3.80061,4.133884,18.013409,4.493312,11.416987,10.228744,5.46812,0.496374,9.319622,13.75568,80.264543,6.939688,0.551201,4.906585,76.511887,5.23846,61.083916,1.454867,1.688359,82.400996,22.873338,10.70629,12.572928,9.947814,1.472041,8.502814,7.483763,6.980412,9.956108,0.301931,1110.396331,223.547,69.45357,27.499638,4.109086,6.426679,58.147733,2.780132,127.467972,6.053193,35.610177,23.301725,49.04479,2.505559,3.921278,2.012649,3.193942,6.036914,19.167654,13.327079,24.821286,12.031795,3.270065,1.250882,108.700891,2.874127,0.684736,33.757175,19.951656,47.76198,2.05508,28.90179,16.570613,4.115771,5.675356,12.894865,135.031164,4.627926,3.204897,169.270617,3.242173,6.667147,28.674757,91.077287,38.518241,10.642836,3.942491,0.798094,22.276056,8.860588,0.199579,27.601038,12.267493,10.150265,6.144562,4.553009,5.447502,2.009245,9.118773,43.997828,40.448191,20.378239,42.292929,1.133066,9.031088,7.554661,19.314747,23.174294,38.13964,65.068149,5.701579,1.056608,10.276158,71.158647,29.170398,60.776238,301.139947,3.447496,26.084662,85.262356,4.018332,22.211743,11.746035,12.311143],"type":"histogram","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
</div>
<div id="boxplot-2" class="section level3">
<h3><span class="header-section-number">4.3.6</span> Boxplot</h3>
<p>pop_m Boxplot:At 2007, most of the countries under 500M pop,two countries over 1000M pop.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb31-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb31-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb31-4" data-line-number="4">p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(<span class="dt">data=</span>gapminder2,<span class="dt">y =</span> <span class="op">~</span>pop_m, <span class="dt">type =</span> <span class="st">&quot;box&quot;</span>)</a>
<a class="sourceLine" id="cb31-5" data-line-number="5">p</a></code></pre></div>
<div id="htmlwidget-0cc610ab3b5822b455d8" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-0cc610ab3b5822b455d8">{"x":{"visdat":{"1a245c167ac2":["function () ","plotlyVisDat"]},"cur_data":"1a245c167ac2","attrs":{"1a245c167ac2":{"y":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"box"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"yaxis":{"domain":[0,1],"automargin":true,"title":"pop_m"},"xaxis":{"domain":[0,1],"automargin":true},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"y":[31.889923,3.600523,33.333216,12.420476,40.301927,20.434176,8.199783,0.708573,150.448339,10.392226,8.078314,9.119152,4.552198,1.639131,190.010647,7.322858,14.326203,8.390505,14.131858,17.696293,33.390141,4.369038,10.238807,16.284741,1318.683096,44.22755,0.71096,64.606759,3.80061,4.133884,18.013409,4.493312,11.416987,10.228744,5.46812,0.496374,9.319622,13.75568,80.264543,6.939688,0.551201,4.906585,76.511887,5.23846,61.083916,1.454867,1.688359,82.400996,22.873338,10.70629,12.572928,9.947814,1.472041,8.502814,7.483763,6.980412,9.956108,0.301931,1110.396331,223.547,69.45357,27.499638,4.109086,6.426679,58.147733,2.780132,127.467972,6.053193,35.610177,23.301725,49.04479,2.505559,3.921278,2.012649,3.193942,6.036914,19.167654,13.327079,24.821286,12.031795,3.270065,1.250882,108.700891,2.874127,0.684736,33.757175,19.951656,47.76198,2.05508,28.90179,16.570613,4.115771,5.675356,12.894865,135.031164,4.627926,3.204897,169.270617,3.242173,6.667147,28.674757,91.077287,38.518241,10.642836,3.942491,0.798094,22.276056,8.860588,0.199579,27.601038,12.267493,10.150265,6.144562,4.553009,5.447502,2.009245,9.118773,43.997828,40.448191,20.378239,42.292929,1.133066,9.031088,7.554661,19.314747,23.174294,38.13964,65.068149,5.701579,1.056608,10.276158,71.158647,29.170398,60.776238,301.139947,3.447496,26.084662,85.262356,4.018332,22.211743,11.746035,12.311143],"type":"box","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
</div>
<div id="map" class="section level3">
<h3><span class="header-section-number">4.3.7</span> Map</h3>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1"><span class="kw">library</span>(plotly)</a>
<a class="sourceLine" id="cb32-2" data-line-number="2">df &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/plotly/datasets/master/2011_us_ag_exports.csv&quot;</span>)</a>
<a class="sourceLine" id="cb32-3" data-line-number="3">df<span class="op">$</span>hover &lt;-<span class="st"> </span><span class="kw">with</span>(df, <span class="kw">paste</span>(state, <span class="st">&#39;&lt;br&gt;&#39;</span>, <span class="st">&quot;Beef&quot;</span>, beef, <span class="st">&quot;Dairy&quot;</span>, dairy, <span class="st">&quot;&lt;br&gt;&quot;</span>,</a>
<a class="sourceLine" id="cb32-4" data-line-number="4">                           <span class="st">&quot;Fruits&quot;</span>, total.fruits, <span class="st">&quot;Veggies&quot;</span>, total.veggies,</a>
<a class="sourceLine" id="cb32-5" data-line-number="5">                           <span class="st">&quot;&lt;br&gt;&quot;</span>, <span class="st">&quot;Wheat&quot;</span>, wheat, <span class="st">&quot;Corn&quot;</span>, corn))</a>
<a class="sourceLine" id="cb32-6" data-line-number="6"></a>
<a class="sourceLine" id="cb32-7" data-line-number="7"><span class="co"># give state boundaries a white border</span></a>
<a class="sourceLine" id="cb32-8" data-line-number="8">l &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">color =</span> <span class="kw">toRGB</span>(<span class="st">&quot;white&quot;</span>), <span class="dt">width =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb32-9" data-line-number="9"><span class="co"># specify some map projection/options</span></a>
<a class="sourceLine" id="cb32-10" data-line-number="10">g &lt;-<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb32-11" data-line-number="11">  <span class="dt">scope =</span> <span class="st">&#39;usa&#39;</span>,</a>
<a class="sourceLine" id="cb32-12" data-line-number="12">  <span class="dt">projection =</span> <span class="kw">list</span>(<span class="dt">type =</span> <span class="st">&#39;albers usa&#39;</span>),</a>
<a class="sourceLine" id="cb32-13" data-line-number="13">  <span class="dt">showlakes =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb32-14" data-line-number="14">  <span class="dt">lakecolor =</span> <span class="kw">toRGB</span>(<span class="st">&#39;white&#39;</span>)</a>
<a class="sourceLine" id="cb32-15" data-line-number="15">)</a>
<a class="sourceLine" id="cb32-16" data-line-number="16"></a>
<a class="sourceLine" id="cb32-17" data-line-number="17">p &lt;-<span class="st"> </span><span class="kw">plot_geo</span>(df, <span class="dt">locationmode =</span> <span class="st">&#39;USA-states&#39;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb32-18" data-line-number="18"><span class="st">  </span><span class="kw">add_trace</span>(</a>
<a class="sourceLine" id="cb32-19" data-line-number="19">    <span class="dt">z =</span> <span class="op">~</span>total.exports, <span class="dt">text =</span> <span class="op">~</span>hover, <span class="dt">locations =</span> <span class="op">~</span>code,</a>
<a class="sourceLine" id="cb32-20" data-line-number="20">    <span class="dt">color =</span> <span class="op">~</span>total.exports, <span class="dt">colors =</span> <span class="st">&#39;Purples&#39;</span></a>
<a class="sourceLine" id="cb32-21" data-line-number="21">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb32-22" data-line-number="22"><span class="st">  </span><span class="kw">colorbar</span>(<span class="dt">title =</span> <span class="st">&quot;Millions USD&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb32-23" data-line-number="23"><span class="st">  </span><span class="kw">layout</span>(</a>
<a class="sourceLine" id="cb32-24" data-line-number="24">    <span class="dt">title =</span> <span class="st">&#39;2011 US Agriculture Exports by State&lt;br&gt;(Hover for breakdown)&#39;</span>,</a>
<a class="sourceLine" id="cb32-25" data-line-number="25">    <span class="dt">geo =</span> g</a>
<a class="sourceLine" id="cb32-26" data-line-number="26">  )</a>
<a class="sourceLine" id="cb32-27" data-line-number="27">p</a></code></pre></div>
<p><div id="htmlwidget-3ea4f8c7e5724b6f833f" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-3ea4f8c7e5724b6f833f">{"x":{"visdat":{"1a24601437a":["function () ","plotlyVisDat"]},"cur_data":"1a24601437a","attrs":{"1a24601437a":{"locationmode":"USA-states","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"z":{},"text":{},"locations":{},"color":{},"colors":"Purples","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"mapType":"geo","scene":{"zaxis":{"title":"total.exports"}},"geo":{"domain":{"x":[0,1],"y":[0,1]},"scope":"usa","projection":{"type":"albers usa"},"showlakes":true,"lakecolor":"rgba(255,255,255,1)"},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5},"title":"2011 US Agriculture Exports by State<br>(Hover for breakdown)"},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"colorbar":{"title":"Millions USD","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"colorscale":[["0","rgba(252,251,253,1)"],["0.00379675268957006","rgba(252,251,253,1)"],["0.00789414101745469","rgba(251,250,252,1)"],["0.0143813750906008","rgba(251,249,252,1)"],["0.0161423820103846","rgba(250,249,252,1)"],["0.0210968198642694","rgba(250,249,252,1)"],["0.0274510512729069","rgba(249,248,251,1)"],["0.0423218073133138","rgba(248,246,250,1)"],["0.0600746759078963","rgba(246,244,249,1)"],["0.0853316641929285","rgba(243,241,248,1)"],["0.0908196568926163","rgba(243,241,247,1)"],["0.101212369662958","rgba(241,240,247,1)"],["0.109944548976674","rgba(241,239,246,1)"],["0.114791880954363","rgba(240,238,246,1)"],["0.122734372769155","rgba(239,237,245,1)"],["0.157280232715679","rgba(234,232,242,1)"],["0.189932462796213","rgba(228,227,240,1)"],["0.224631273275466","rgba(222,222,237,1)"],["0.228156324861464","rgba(222,221,237,1)"],["0.234696795440788","rgba(221,220,236,1)"],["0.240513674820586","rgba(220,219,236,1)"],["0.302515041401446","rgba(205,206,229,1)"],["0.429050951310798","rgba(175,174,211,1)"],["0.524494589874867","rgba(152,148,197,1)"],["1","rgba(63,0,125,1)"]],"showscale":true,"locationmode":"USA-states","z":[1390.63,13.31,1463.17,3586.02,16472.88,1851.33,259.62,282.19,3764.09,2860.84,401.84,2078.89,8709.48,5050.23,11273.76,4589.01,1889.15,1914.23,278.37,692.75,248.65,3164.16,7192.33,2170.8,3933.42,1718,7114.13,139.89,73.06,500.4,751.58,1488.9,3806.05,3761.96,3979.79,1646.41,1794.57,1969.87,31.59,929.93,3770.19,1535.13,6648.22,453.39,180.14,1146.48,3894.81,138.89,3090.23,349.69],"text":["Alabama <br> Beef 34.4 Dairy 4.06 <br> Fruits 25.11 Veggies 14.33 <br> Wheat 70 Corn 34.9","Alaska <br> Beef 0.2 Dairy 0.19 <br> Fruits 0 Veggies 1.56 <br> Wheat 0 Corn 0","Arizona <br> Beef 71.3 Dairy 105.48 <br> Fruits 60.27 Veggies 386.91 <br> Wheat 48.7 Corn 7.3","Arkansas <br> Beef 53.2 Dairy 3.53 <br> Fruits 6.88 Veggies 11.45 <br> Wheat 114.5 Corn 69.5"," California <br> Beef 228.7 Dairy 929.95 <br> Fruits 8736.4 Veggies 2106.79 <br> Wheat 249.3 Corn 34.6","Colorado <br> Beef 261.4 Dairy 71.94 <br> Fruits 17.99 Veggies 118.27 <br> Wheat 400.5 Corn 183.2","Connecticut <br> Beef 1.1 Dairy 9.49 <br> Fruits 13.1 Veggies 11.16 <br> Wheat 0 Corn 0","Delaware <br> Beef 0.4 Dairy 2.3 <br> Fruits 1.53 Veggies 20.03 <br> Wheat 22.9 Corn 26.9","Florida <br> Beef 42.6 Dairy 66.31 <br> Fruits 1371.36 Veggies 450.86 <br> Wheat 1.8 Corn 3.5","Georgia <br> Beef 31 Dairy 38.38 <br> Fruits 233.51 Veggies 154.77 <br> Wheat 65.4 Corn 57.8","Hawaii <br> Beef 4 Dairy 1.16 <br> Fruits 55.51 Veggies 24.83 <br> Wheat 0 Corn 0","Idaho <br> Beef 119.8 Dairy 294.6 <br> Fruits 21.64 Veggies 319.19 <br> Wheat 568.2 Corn 24","Illinois <br> Beef 53.7 Dairy 45.82 <br> Fruits 12.53 Veggies 39.95 <br> Wheat 223.8 Corn 2228.5","Indiana <br> Beef 21.9 Dairy 89.7 <br> Fruits 12.98 Veggies 37.89 <br> Wheat 114 Corn 1123.2","Iowa <br> Beef 289.8 Dairy 107 <br> Fruits 3.24 Veggies 7.1 <br> Wheat 3.1 Corn 2529.8","Kansas <br> Beef 659.3 Dairy 65.45 <br> Fruits 3.11 Veggies 9.32 <br> Wheat 1426.5 Corn 457.3","Kentucky <br> Beef 54.8 Dairy 28.27 <br> Fruits 6.6 Veggies 0 <br> Wheat 149.3 Corn 179.1","Louisiana <br> Beef 19.8 Dairy 6.02 <br> Fruits 17.83 Veggies 17.25 <br> Wheat 78.7 Corn 91.4","Maine <br> Beef 1.4 Dairy 16.18 <br> Fruits 52.01 Veggies 62.9 <br> Wheat 0 Corn 0","Maryland <br> Beef 5.6 Dairy 24.81 <br> Fruits 12.9 Veggies 20.43 <br> Wheat 55.8 Corn 54.1","Massachusetts <br> Beef 0.6 Dairy 5.81 <br> Fruits 80.83 Veggies 21.13 <br> Wheat 0 Corn 0","Michigan <br> Beef 37.7 Dairy 214.82 <br> Fruits 257.69 Veggies 189.96 <br> Wheat 247 Corn 381.5","Minnesota <br> Beef 112.3 Dairy 218.05 <br> Fruits 7.91 Veggies 120.37 <br> Wheat 538.1 Corn 1264.3","Mississippi <br> Beef 12.8 Dairy 5.45 <br> Fruits 17.04 Veggies 27.87 <br> Wheat 102.2 Corn 110","Missouri <br> Beef 137.2 Dairy 34.26 <br> Fruits 13.18 Veggies 17.9 <br> Wheat 161.7 Corn 428.8","Montana <br> Beef 105 Dairy 6.82 <br> Fruits 3.3 Veggies 45.27 <br> Wheat 1198.1 Corn 5.4","Nebraska <br> Beef 762.2 Dairy 30.07 <br> Fruits 2.16 Veggies 53.5 <br> Wheat 292.3 Corn 1735.9","Nevada <br> Beef 21.8 Dairy 16.57 <br> Fruits 1.19 Veggies 27.93 <br> Wheat 5.4 Corn 0","New Hampshire <br> Beef 0.6 Dairy 7.46 <br> Fruits 7.98 Veggies 4.5 <br> Wheat 0 Corn 0","New Jersey <br> Beef 0.8 Dairy 3.37 <br> Fruits 109.45 Veggies 56.54 <br> Wheat 6.7 Corn 10.1","New Mexico <br> Beef 117.2 Dairy 191.01 <br> Fruits 101.9 Veggies 43.88 <br> Wheat 13.9 Corn 11.2","New York <br> Beef 22.2 Dairy 331.8 <br> Fruits 202.56 Veggies 143.37 <br> Wheat 29.9 Corn 106.1","North Carolina <br> Beef 24.8 Dairy 24.9 <br> Fruits 74.47 Veggies 150.45 <br> Wheat 200.3 Corn 92.2","North Dakota <br> Beef 78.5 Dairy 8.14 <br> Fruits 0.25 Veggies 130.79 <br> Wheat 1664.5 Corn 236.1","Ohio <br> Beef 36.2 Dairy 134.57 <br> Fruits 27.21 Veggies 53.53 <br> Wheat 207.4 Corn 535.1","Oklahoma <br> Beef 337.6 Dairy 24.35 <br> Fruits 9.24 Veggies 8.9 <br> Wheat 324.8 Corn 27.5","Oregon <br> Beef 58.8 Dairy 63.66 <br> Fruits 315.04 Veggies 126.5 <br> Wheat 320.3 Corn 11.7","Pennsylvania <br> Beef 50.9 Dairy 280.87 <br> Fruits 89.48 Veggies 38.26 <br> Wheat 41 Corn 112.1","Rhode Island <br> Beef 0.1 Dairy 0.52 <br> Fruits 2.83 Veggies 3.02 <br> Wheat 0 Corn 0","South Carolina <br> Beef 15.2 Dairy 7.62 <br> Fruits 53.45 Veggies 42.66 <br> Wheat 55.3 Corn 32.1","South Dakota <br> Beef 193.5 Dairy 46.77 <br> Fruits 0.8 Veggies 4.06 <br> Wheat 704.5 Corn 643.6","Tennessee <br> Beef 51.1 Dairy 21.18 <br> Fruits 6.23 Veggies 24.67 <br> Wheat 100 Corn 88.8","Texas <br> Beef 961 Dairy 240.55 <br> Fruits 99.9 Veggies 115.23 <br> Wheat 309.7 Corn 167.2","Utah <br> Beef 27.9 Dairy 48.6 <br> Fruits 12.34 Veggies 6.6 <br> Wheat 42.8 Corn 5.3","Vermont <br> Beef 6.2 Dairy 65.98 <br> Fruits 8.01 Veggies 4.05 <br> Wheat 0 Corn 0","Virginia <br> Beef 39.5 Dairy 47.85 <br> Fruits 36.48 Veggies 27.25 <br> Wheat 77.5 Corn 39.5","Washington <br> Beef 59.2 Dairy 154.18 <br> Fruits 1738.57 Veggies 363.79 <br> Wheat 786.3 Corn 29.5","West Virginia <br> Beef 12 Dairy 3.9 <br> Fruits 11.54 Veggies 0 <br> Wheat 1.6 Corn 3.5","Wisconsin <br> Beef 107.3 Dairy 633.6 <br> Fruits 133.8 Veggies 148.99 <br> Wheat 96.7 Corn 460.5","Wyoming <br> Beef 75.1 Dairy 2.89 <br> Fruits 0.17 Veggies 10.23 <br> Wheat 20.7 Corn 9"],"locations":["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"],"type":"choropleth","marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":13.31,"cmax":16472.88,"colorscale":[["0","rgba(252,251,253,1)"],["0.00379675268957006","rgba(252,251,253,1)"],["0.00789414101745469","rgba(251,250,252,1)"],["0.0143813750906008","rgba(251,249,252,1)"],["0.0161423820103846","rgba(250,249,252,1)"],["0.0210968198642694","rgba(250,249,252,1)"],["0.0274510512729069","rgba(249,248,251,1)"],["0.0423218073133138","rgba(248,246,250,1)"],["0.0600746759078963","rgba(246,244,249,1)"],["0.0853316641929285","rgba(243,241,248,1)"],["0.0908196568926163","rgba(243,241,247,1)"],["0.101212369662958","rgba(241,240,247,1)"],["0.109944548976674","rgba(241,239,246,1)"],["0.114791880954363","rgba(240,238,246,1)"],["0.122734372769155","rgba(239,237,245,1)"],["0.157280232715679","rgba(234,232,242,1)"],["0.189932462796213","rgba(228,227,240,1)"],["0.224631273275466","rgba(222,222,237,1)"],["0.228156324861464","rgba(222,221,237,1)"],["0.234696795440788","rgba(221,220,236,1)"],["0.240513674820586","rgba(220,219,236,1)"],["0.302515041401446","rgba(205,206,229,1)"],["0.429050951310798","rgba(175,174,211,1)"],["0.524494589874867","rgba(152,148,197,1)"],["1","rgba(63,0,125,1)"]],"showscale":false,"color":[1390.63,13.31,1463.17,3586.02,16472.88,1851.33,259.62,282.19,3764.09,2860.84,401.84,2078.89,8709.48,5050.23,11273.76,4589.01,1889.15,1914.23,278.37,692.75,248.65,3164.16,7192.33,2170.8,3933.42,1718,7114.13,139.89,73.06,500.4,751.58,1488.9,3806.05,3761.96,3979.79,1646.41,1794.57,1969.87,31.59,929.93,3770.19,1535.13,6648.22,453.39,180.14,1146.48,3894.81,138.89,3090.23,349.69]}},"geo":"geo","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
### Other plot</p>
</div>
<div id="settingtitlesubtitlex-labely-label-1" class="section level3">
<h3><span class="header-section-number">4.3.8</span> setting:title,subtitle,x label,y label</h3>
<p>pop_m vs year line plot:from 1950 to 2007, world pop increased from 2B to 6B</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb33-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb33-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb33-4" data-line-number="4">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb33-5" data-line-number="5">p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(gapminder2, <span class="dt">x =</span> <span class="op">~</span>year, <span class="dt">y =</span> <span class="op">~</span>pop_m, <span class="dt">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="dt">mode =</span> <span class="st">&#39;lines+markers&#39;</span>)</a>
<a class="sourceLine" id="cb33-6" data-line-number="6">p<span class="op">%&gt;%</span><span class="kw">layout</span>(<span class="dt">title =</span> <span class="st">&#39;title&#39;</span></a>
<a class="sourceLine" id="cb33-7" data-line-number="7">         ,<span class="dt">xaxis =</span> <span class="kw">list</span>(<span class="dt">title =</span> <span class="st">&#39;x lable&#39;</span>)</a>
<a class="sourceLine" id="cb33-8" data-line-number="8">         ,<span class="dt">yaxis =</span> <span class="kw">list</span>(<span class="dt">title =</span> <span class="st">&#39;y lable&#39;</span>)</a>
<a class="sourceLine" id="cb33-9" data-line-number="9">          )</a></code></pre></div>
<div id="htmlwidget-dd4da1121a425dae6ac8" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-dd4da1121a425dae6ac8">{"x":{"visdat":{"1a242d5c542d":["function () ","plotlyVisDat"]},"cur_data":"1a242d5c542d","attrs":{"1a242d5c542d":{"x":{},"y":{},"mode":"lines+markers","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"title","xaxis":{"domain":[0,1],"automargin":true,"title":"x lable"},"yaxis":{"domain":[0,1],"automargin":true,"title":"y lable"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[2406.95715,2664.40458,2899.782974,3217.478384,3576.977158,3930.045807,4289.43684,4691.477418,5110.71026,5515.204472,5886.977579,6251.013179],"mode":"lines+markers","type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
</div>
<div id="hover-text" class="section level3">
<h3><span class="header-section-number">4.3.9</span> hover text</h3>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb34-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb34-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb34-4" data-line-number="4">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb34-5" data-line-number="5"></a>
<a class="sourceLine" id="cb34-6" data-line-number="6">p &lt;-<span class="st"> </span><span class="kw">plot_ly</span>(gapminder2, <span class="dt">x =</span> <span class="op">~</span>year, <span class="dt">y =</span> <span class="op">~</span>pop_m, <span class="dt">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="dt">mode =</span><span class="st">&#39;lines+markers&#39;</span>, <span class="dt">hoverinfo =</span> <span class="st">&#39;text&#39;</span>,<span class="dt">text =</span> <span class="op">~</span><span class="kw">paste</span>(<span class="st">&#39;year is: &#39;</span>, year,<span class="st">&#39;populate is: &#39;</span>,pop_m))</a>
<a class="sourceLine" id="cb34-7" data-line-number="7">             </a>
<a class="sourceLine" id="cb34-8" data-line-number="8">p   </a></code></pre></div>
<div id="htmlwidget-28a111b005194e04f4f9" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-28a111b005194e04f4f9">{"x":{"visdat":{"1a24111e17b2":["function () ","plotlyVisDat"]},"cur_data":"1a24111e17b2","attrs":{"1a24111e17b2":{"x":{},"y":{},"mode":"lines+markers","hoverinfo":"text","text":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"pop_m"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[2406.95715,2664.40458,2899.782974,3217.478384,3576.977158,3930.045807,4289.43684,4691.477418,5110.71026,5515.204472,5886.977579,6251.013179],"mode":"lines+markers","hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text"],"text":["year is:  1952 populate is:  2406.95715","year is:  1957 populate is:  2664.40458","year is:  1962 populate is:  2899.782974","year is:  1967 populate is:  3217.478384","year is:  1972 populate is:  3576.977158","year is:  1977 populate is:  3930.045807","year is:  1982 populate is:  4289.43684","year is:  1987 populate is:  4691.477418","year is:  1992 populate is:  5110.71026","year is:  1997 populate is:  5515.204472","year is:  2002 populate is:  5886.977579","year is:  2007 populate is:  6251.013179"],"type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
</div>
<div id="convert-ggplot-to-plotly" class="section level3">
<h3><span class="header-section-number">4.3.10</span> convert ggplot to plotly</h3>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb35-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb35-3" data-line-number="3"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb35-4" data-line-number="4"><span class="kw">library</span>(ggthemes)</a>
<a class="sourceLine" id="cb35-5" data-line-number="5">gapminder2=gapminder<span class="op">%&gt;%</span><span class="kw">group_by</span>(year,continent)<span class="op">%&gt;%</span><span class="kw">summarise</span>(<span class="dt">pop_m=</span><span class="kw">sum</span>(pop<span class="op">/</span><span class="dv">1000000</span>,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb35-6" data-line-number="6">gg=<span class="kw">ggplot</span>(gapminder2, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> pop_m,<span class="dt">color=</span>continent)) <span class="op">+</span></a>
<a class="sourceLine" id="cb35-7" data-line-number="7"><span class="st">  </span><span class="kw">geom_point</span>()<span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;A title&quot;</span>, <span class="dt">subtitle =</span> <span class="st">&quot;A subtitle&quot;</span>,<span class="dt">x=</span><span class="st">&quot;New x label&quot;</span>,<span class="dt">y=</span><span class="st">&quot;New y label&quot;</span>)<span class="op">+</span><span class="kw">theme_fivethirtyeight</span>()</a>
<a class="sourceLine" id="cb35-8" data-line-number="8"></a>
<a class="sourceLine" id="cb35-9" data-line-number="9">p=<span class="kw">ggplotly</span>(gg)</a></code></pre></div>
<pre><code>## Warning: plotly.js does not (yet) support horizontal legend items 
## You can track progress here: 
## https://github.com/plotly/plotly.js/issues/53</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1">p</a></code></pre></div>
<div id="htmlwidget-217886fed819572d6189" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-217886fed819572d6189">{"x":{"data":[{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[237.640501,264.837738,296.516865,335.289489,379.879541,433.061021,499.348587,574.83411,659.081517,743.832984,833.723916,929.539692],"text":["year: 1952<br />pop_m:  237.64050<br />continent: Africa","year: 1957<br />pop_m:  264.83774<br />continent: Africa","year: 1962<br />pop_m:  296.51686<br />continent: Africa","year: 1967<br />pop_m:  335.28949<br />continent: Africa","year: 1972<br />pop_m:  379.87954<br />continent: Africa","year: 1977<br />pop_m:  433.06102<br />continent: Africa","year: 1982<br />pop_m:  499.34859<br />continent: Africa","year: 1987<br />pop_m:  574.83411<br />continent: Africa","year: 1992<br />pop_m:  659.08152<br />continent: Africa","year: 1997<br />pop_m:  743.83298<br />continent: Africa","year: 2002<br />pop_m:  833.72392<br />continent: Africa","year: 2007<br />pop_m:  929.53969<br />continent: Africa"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[345.152446,386.953916,433.270254,480.746623,529.38421,578.067699,630.29092,682.753971,739.274104,796.90041,849.772762,898.871184],"text":["year: 1952<br />pop_m:  345.15245<br />continent: Americas","year: 1957<br />pop_m:  386.95392<br />continent: Americas","year: 1962<br />pop_m:  433.27025<br />continent: Americas","year: 1967<br />pop_m:  480.74662<br />continent: Americas","year: 1972<br />pop_m:  529.38421<br />continent: Americas","year: 1977<br />pop_m:  578.06770<br />continent: Americas","year: 1982<br />pop_m:  630.29092<br />continent: Americas","year: 1987<br />pop_m:  682.75397<br />continent: Americas","year: 1992<br />pop_m:  739.27410<br />continent: Americas","year: 1997<br />pop_m:  796.90041<br />continent: Americas","year: 2002<br />pop_m:  849.77276<br />continent: Americas","year: 2007<br />pop_m:  898.87118<br />continent: Americas"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[1395.357351,1562.780599,1696.357182,1905.6629,2150.972248,2384.513556,2610.135582,2871.220762,3133.292191,3383.2855,3601.802203,3811.953827],"text":["year: 1952<br />pop_m: 1395.35735<br />continent: Asia","year: 1957<br />pop_m: 1562.78060<br />continent: Asia","year: 1962<br />pop_m: 1696.35718<br />continent: Asia","year: 1967<br />pop_m: 1905.66290<br />continent: Asia","year: 1972<br />pop_m: 2150.97225<br />continent: Asia","year: 1977<br />pop_m: 2384.51356<br />continent: Asia","year: 1982<br />pop_m: 2610.13558<br />continent: Asia","year: 1987<br />pop_m: 2871.22076<br />continent: Asia","year: 1992<br />pop_m: 3133.29219<br />continent: Asia","year: 1997<br />pop_m: 3383.28550<br />continent: Asia","year: 2002<br />pop_m: 3601.80220<br />continent: Asia","year: 2007<br />pop_m: 3811.95383<br />continent: Asia"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[418.120846,437.890351,460.355155,481.178958,500.635059,517.164531,531.266901,543.09416,558.142797,568.944148,578.223869,586.098529],"text":["year: 1952<br />pop_m:  418.12085<br />continent: Europe","year: 1957<br />pop_m:  437.89035<br />continent: Europe","year: 1962<br />pop_m:  460.35516<br />continent: Europe","year: 1967<br />pop_m:  481.17896<br />continent: Europe","year: 1972<br />pop_m:  500.63506<br />continent: Europe","year: 1977<br />pop_m:  517.16453<br />continent: Europe","year: 1982<br />pop_m:  531.26690<br />continent: Europe","year: 1987<br />pop_m:  543.09416<br />continent: Europe","year: 1992<br />pop_m:  558.14280<br />continent: Europe","year: 1997<br />pop_m:  568.94415<br />continent: Europe","year: 2002<br />pop_m:  578.22387<br />continent: Europe","year: 2007<br />pop_m:  586.09853<br />continent: Europe"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[10.686006,11.941976,13.283518,14.600414,16.1061,17.239,18.39485,19.574415,20.919651,22.24143,23.454829,24.549947],"text":["year: 1952<br />pop_m:   10.68601<br />continent: Oceania","year: 1957<br />pop_m:   11.94198<br />continent: Oceania","year: 1962<br />pop_m:   13.28352<br />continent: Oceania","year: 1967<br />pop_m:   14.60041<br />continent: Oceania","year: 1972<br />pop_m:   16.10610<br />continent: Oceania","year: 1977<br />pop_m:   17.23900<br />continent: Oceania","year: 1982<br />pop_m:   18.39485<br />continent: Oceania","year: 1987<br />pop_m:   19.57442<br />continent: Oceania","year: 1992<br />pop_m:   20.91965<br />continent: Oceania","year: 1997<br />pop_m:   22.24143<br />continent: Oceania","year: 2002<br />pop_m:   23.45483<br />continent: Oceania","year: 2007<br />pop_m:   24.54995<br />continent: Oceania"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(231,107,243,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(231,107,243,1)"}},"hoveron":"points","name":"Oceania","legendgroup":"Oceania","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":59.1103362391034,"r":19.2,"b":35.9372353673724,"l":48.6894146948942},"plot_bgcolor":"rgba(240,240,240,1)","paper_bgcolor":"rgba(240,240,240,1)","font":{"color":"rgba(60,60,60,1)","family":"sans","size":15.9402241594022},"title":"<b> A title <\/b>","titlefont":{"color":"rgba(60,60,60,1)","family":"sans","size":23.9103362391034},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1949.25,2009.75],"tickmode":"array","ticktext":["1950","1960","1970","1980","1990","2000"],"tickvals":[1950,1960,1970,1980,1990,2000],"categoryorder":"array","categoryarray":["1950","1960","1970","1980","1990","2000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.98505603985056,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(60,60,60,1)","family":"sans","size":12.7521793275218},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(210,210,210,1)","gridwidth":0.724555643609193,"zeroline":false,"anchor":"y","title":"","titlefont":{"color":null,"family":null,"size":0},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-179.37738505,4002.01721805],"tickmode":"array","ticktext":["0","1000","2000","3000","4000"],"tickvals":[0,1000,2000,3000,4000],"categoryorder":"array","categoryarray":["0","1000","2000","3000","4000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.98505603985056,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(60,60,60,1)","family":"sans","size":12.7521793275218},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(210,210,210,1)","gridwidth":0.724555643609193,"zeroline":false,"anchor":"x","title":"","titlefont":{"color":null,"family":null,"size":0},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"transparent","width":0.724555643609193,"linetype":"none"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(240,240,240,1)","bordercolor":"transparent","borderwidth":2.06156048675734,"font":{"color":"rgba(60,60,60,1)","family":"sans","size":12.7521793275218},"y":0.964566929133858},"annotations":[{"text":"continent","x":1.02,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(60,60,60,1)","family":"sans","size":15.9402241594022},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"left","yanchor":"bottom","legendTitle":true}],"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"source":"A","attrs":{"1a2435ed22f7":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"1a2435ed22f7","visdat":{"1a2435ed22f7":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
</div>
</div>
<div id="leaflet" class="section level2">
<h2><span class="header-section-number">4.4</span> leaflet</h2>
<p>javascript library for interactive map
<a href="https://leafletjs.com/" class="uri">https://leafletjs.com/</a></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="kw">library</span>(leaflet)</a>
<a class="sourceLine" id="cb38-2" data-line-number="2"><span class="kw">leaflet</span>() <span class="op">%&gt;%</span><span class="kw">addTiles</span>()</a></code></pre></div>
<div id="htmlwidget-18399f65125b761c6f74" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-18399f65125b761c6f74">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]}]},"evals":[],"jsHooks":[]}</script>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="clean.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="model.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/TonyFly2000/Bookdown/04-Visualize.Rmd",
"text": "Edit"
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
