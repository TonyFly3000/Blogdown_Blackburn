<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="kaggle kernel:ramen ratings">
  <meta name="generator" content="Hugo 0.51" />

  <title>kaggle kernel系列:方便面 &middot; Tony Duan</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

 
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/androidstudio.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />

  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="/">Tony Duan.R</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/post/"><i class='fa fa-list fa-fw'></i>Blog</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/book/"><i class='fa fa-tasks fa-fw'></i>Book</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/project/"><i class='fa fa-tasks fa-fw'></i>Project</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/about/"><i class='fa fa-user fa-fw'></i>About me</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/contact/"><i class='fa fa-at fa-fw'></i>Contact</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">



    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://facebook.com/tony.j.fly" target="_blank"><i class="fa fa-facebook-square fa-fw"></i>Facebook</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/tony-jc-duan-005b601a" target="_blank"><i class="fa fa-linkedin-square fa-fw"></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/*" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2019. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://github.com/rstudio/rmarkdown" target="_blank">Blogdown</a></small><br>
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>kaggle kernel系列:方便面</h1>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>04 Jun 2009, 00:00</time>
  </div>

  

  
  
  
  

  
  
  
  

</div>

  


<div id="-ramen-ratings" class="section level2">
<h2>数据集：方便面评分 ramen ratings</h2>
<p>Link:<a href="https://www.kaggle.com/residentmario/ramen-ratings" class="uri">https://www.kaggle.com/residentmario/ramen-ratings</a></p>
<p>2018年1月的数据，40KB，CSV format.7个变量，3180行数据量</p>
<p>数据源 从 在网站[theramenrater.com] 上爬下来。目前该网站还在继续点评方便面</p>
<p>数据内容是方便面的点评数据。外国人方便面都叫拉面。。weird。。</p>
<p>目前有 114个kernal(大部分为python),65个赞。</p>
<p>收录到在 2019-06-04期tidytuesday</p>
<p><a href="https://github.com/rfordatascience/tidytuesday/tree/master/data/2019/2019-06-04" class="uri">https://github.com/rfordatascience/tidytuesday/tree/master/data/2019/2019-06-04</a></p>
</div>
<div id="package" class="section level2">
<h2>package</h2>
<pre class="r"><code># input data
library(readr)
# clean data
library(tidyverse)
# model
library(rpart)
library(rpart.plot)
library(ROCR)</code></pre>
</div>
<div id="input-data" class="section level2">
<h2>input data</h2>
<pre class="r"><code>ramen_ratings &lt;- readr::read_csv(&quot;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-06-04/ramen_ratings.csv&quot;)</code></pre>
</div>
<div id="eda" class="section level2">
<h2>EDA</h2>
<p>3180行，6个变量</p>
<pre class="r"><code>glimpse(ramen_ratings)</code></pre>
<pre><code>## Observations: 3,180
## Variables: 6
## $ review_number &lt;int&gt; 3180, 3179, 3178, 3177, 3176, 3175, 3174, 3173, ...
## $ brand         &lt;chr&gt; &quot;Yum Yum&quot;, &quot;Nagatanien&quot;, &quot;Acecook&quot;, &quot;Maison de C...
## $ variety       &lt;chr&gt; &quot;Tem Tem Tom Yum Moo Deng&quot;, &quot;tom Yum Kung Rice V...
## $ style         &lt;chr&gt; &quot;Cup&quot;, &quot;Pack&quot;, &quot;Cup&quot;, &quot;Cup&quot;, &quot;Tray&quot;, &quot;Cup&quot;, &quot;Pac...
## $ country       &lt;chr&gt; &quot;Thailand&quot;, &quot;Japan&quot;, &quot;Japan&quot;, &quot;France&quot;, &quot;Japan&quot;,...
## $ stars         &lt;dbl&gt; 3.75, 2.00, 2.50, 3.75, 5.00, 3.50, 3.75, 5.00, ...</code></pre>
<p>2个数值型，4个文本型</p>
<pre class="r"><code>names(ramen_ratings%&gt;%select_if(is.numeric))</code></pre>
<pre><code>## [1] &quot;review_number&quot; &quot;stars&quot;</code></pre>
<pre class="r"><code>names(ramen_ratings%&gt;%select_if(is.character))</code></pre>
<pre><code>## [1] &quot;brand&quot;   &quot;variety&quot; &quot;style&quot;   &quot;country&quot;</code></pre>
<p>review_number为点评序号；stars为评分</p>
<pre class="r"><code>ramen_ratings %&gt;%
  keep(is.numeric) %&gt;% 
  gather() %&gt;% 
  ggplot(aes(value)) +
    facet_wrap(~ key, scales = &quot;free&quot;) +
    geom_histogram()</code></pre>
<p><img src="/post/2009-06-04-kaggle-kernel-wine-reviews_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>13.9% 为日清牌子</p>
<pre class="r"><code>ramen_ratings %&gt;%mutate(brand=fct_lump(brand,10))%&gt;%
   count(brand, sort = TRUE)%&gt;%mutate(percent = n / sum(n))</code></pre>
<pre><code>## # A tibble: 11 x 3
##    brand               n percent
##    &lt;fct&gt;           &lt;int&gt;   &lt;dbl&gt;
##  1 Other            2059  0.647 
##  2 Nissin            443  0.139 
##  3 Nongshim          110  0.0346
##  4 Maruchan          106  0.0333
##  5 Myojo              90  0.0283
##  6 Samyang Foods      82  0.0258
##  7 Mama               71  0.0223
##  8 Paldo              71  0.0223
##  9 Indomie            56  0.0176
## 10 Ottogi             48  0.0151
## 11 Sapporo Ichiban    44  0.0138</code></pre>
<p>57% 为包装；19%为碗装</p>
<pre class="r"><code>ramen_ratings %&gt;%
   count(style, sort = TRUE)%&gt;%mutate(percent = n / sum(n))</code></pre>
<pre><code>## # A tibble: 9 x 3
##   style          n  percent
##   &lt;chr&gt;      &lt;int&gt;    &lt;dbl&gt;
## 1 Pack        1832 0.576   
## 2 Bowl         612 0.192   
## 3 Cup          559 0.176   
## 4 Tray         138 0.0434  
## 5 Box           32 0.0101  
## 6 Restaurant     3 0.000943
## 7 &lt;NA&gt;           2 0.000629
## 8 Bar            1 0.000314
## 9 Can            1 0.000314</code></pre>
<p>16% 日本。不确定是产地为日本还是牌子是日本。</p>
<pre class="r"><code>ramen_ratings %&gt;%mutate(country=fct_lump(country,8))%&gt;%
   count(country, sort = TRUE)%&gt;%mutate(percent = n / sum(n))</code></pre>
<pre><code>## # A tibble: 9 x 3
##   country           n percent
##   &lt;fct&gt;         &lt;int&gt;   &lt;dbl&gt;
## 1 Other           830  0.261 
## 2 Japan           532  0.167 
## 3 United States   382  0.120 
## 4 South Korea     357  0.112 
## 5 Taiwan          330  0.104 
## 6 China           207  0.0651
## 7 Thailand        205  0.0645
## 8 Malaysia        182  0.0572
## 9 Hong Kong       155  0.0487</code></pre>
<p>brand和country 交叉表。可见country 为产地。</p>
<pre class="r"><code>ramen_ratings %&gt;%mutate(country=fct_lump(country,20))%&gt;%
   count(brand,country, sort = TRUE)%&gt;%mutate(percent = n / sum(n))</code></pre>
<pre><code>## # A tibble: 523 x 4
##    brand         country           n percent
##    &lt;chr&gt;         &lt;fct&gt;         &lt;int&gt;   &lt;dbl&gt;
##  1 Nissin        Japan           134  0.0421
##  2 Nissin        United States   105  0.0330
##  3 Samyang Foods South Korea      80  0.0252
##  4 Nissin        Hong Kong        79  0.0248
##  5 Paldo         South Korea      70  0.0220
##  6 Myojo         Japan            63  0.0198
##  7 Nongshim      South Korea      60  0.0189
##  8 Mama          Thailand         58  0.0182
##  9 Maruchan      United States    56  0.0176
## 10 Indomie       Indonesia        54  0.0170
## # ... with 513 more rows</code></pre>
<pre class="r"><code>ramen_ratings%&gt;%filter(country==&#39;Hong Kong&#39;)</code></pre>
<pre><code>## # A tibble: 155 x 6
##    review_number brand   variety                       style country  stars
##            &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;                         &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt;
##  1          3171 Doll    Bowl Noodle Satay &amp; Beef Fla~ Bowl  Hong Ko~  4.25
##  2          3143 Sau Tao Tom Yum Kung Flavour Rice Ve~ Pack  Hong Ko~  3.75
##  3          3044 Sau Tao Laksa Flavour Ramen           Pack  Hong Ko~  4.5 
##  4          3019 Sau Tao Tom Yum Kung Flavour Ramen    Pack  Hong Ko~  5   
##  5          2928 Nissin  Cup Noodles Light Spicy Seaf~ Cup   Hong Ko~  3.25
##  6          2903 Nissin  Demae Ramen Sesame Oil Flavo~ Pack  Hong Ko~  3.5 
##  7          2806 Nissin  Cup Noodles Light Seafood Fl~ Cup   Hong Ko~  5   
##  8          2802 Nissin  Cup Noodles Black Pepper Cra~ Pack  Hong Ko~  5   
##  9          2767 Nissin  Cup Noodles Spicy Seafood Fl~ Pack  Hong Ko~  5   
## 10          2750 Nissin  Cup Noodles Tom Yum Goong Fl~ Pack  Hong Ko~  5   
## # ... with 145 more rows</code></pre>
<pre class="r"><code>ramen_ratings%&gt;%arrange(desc(stars))</code></pre>
<pre><code>## # A tibble: 3,180 x 6
##    review_number brand       variety                 style country    stars
##            &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;                   &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;
##  1          3176 Maruchan    Gotsumori Shio Yakisoba Tray  Japan          5
##  2          3173 Sapporo Ic~ Momosan Ramen Tonkotsu  Pack  United St~     5
##  3          3161 Sakurai Fo~ Vegetarian Soymilk Spi~ Pack  Japan          5
##  4          3160 Mazendo     Noodles With Chili Mal~ Pack  Taiwan         5
##  5          3157 TIEasy      Traditional Scallion S~ Pack  Taiwan         5
##  6          3156 Nongshim    Spicy Gamjatang         Pack  South Kor~     5
##  7          3153 Maison de ~ Ramen Gout BBQ Coree    Cup   France         5
##  8          3152 Maruchan    QTTA Curry Ramen        Cup   Japan          5
##  9          3151 Hakubaku    Shoyu Soy Sauce Flavor~ Pack  United St~     5
## 10          3148 Hakubaku    Tonkotsu Pork Flavor R~ Pack  United St~     5
## # ... with 3,170 more rows</code></pre>
</div>
<div id="clean-data" class="section level2">
<h2>clean data</h2>
<pre class="r"><code>ramen_ratings_02=ramen_ratings%&gt;%filter(is.na(stars)==FALSE)%&gt;%
  mutate(stars_level=factor(round(stars)),stars_target=factor(if_else(stars&gt;=4,1,0)))%&gt;%select(-review_number)%&gt;%
  mutate(brand_top=fct_lump(brand,50),
         Spicy=str_detect(variety,&#39;Spicy&#39;)+str_detect(variety,&#39;Chili&#39;)+str_detect(          variety,&#39;Hot&#39;)+str_detect(variety,&#39;Kimchi&#39;) +str_detect(variety,&#39;Laksa&#39;),
         Spicy_flag=if_else(Spicy&gt;0,1,0),
         Beef_flag=str_detect(variety,&#39;Beef&#39;),
         Udon_flag=str_detect(variety,&#39;Udon&#39;),
         Chicken_flag=str_detect(variety,&#39;Chicken&#39;)
         )</code></pre>
<pre class="r"><code>ramen_ratings_02 %&gt;%
   count(stars_target, sort = TRUE)%&gt;%mutate(percent = n / sum(n))</code></pre>
<pre><code>## # A tibble: 2 x 3
##   stars_target     n percent
##   &lt;fct&gt;        &lt;int&gt;   &lt;dbl&gt;
## 1 0             1804   0.570
## 2 1             1362   0.430</code></pre>
<pre class="r"><code>ramen_ratings_02 %&gt;%
   count(stars_level, sort = TRUE)%&gt;%mutate(percent = n / sum(n))</code></pre>
<pre><code>## # A tibble: 6 x 3
##   stars_level     n percent
##   &lt;fct&gt;       &lt;int&gt;   &lt;dbl&gt;
## 1 4            1683  0.532 
## 2 5             614  0.194 
## 3 3             486  0.154 
## 4 2             269  0.0850
## 5 0              68  0.0215
## 6 1              46  0.0145</code></pre>
</div>
<div id="plot" class="section level2">
<h2>Plot</h2>
<p>马来西亚高评分的占比最高</p>
<pre class="r"><code>data=ramen_ratings_02%&gt;%mutate(country=fct_lump(country,8))

ggplot(data, aes(x = country, fill = stars_level))+
  geom_bar(position=&quot;fill&quot;, colour=&quot;black&quot;)+
  theme_classic(base_size = 9)+
  labs(title=&#39;Bar chart for country due to stars ranges&#39;, 
        subtitle=&#39;Cumulated&#39;, y=&quot;Indicator&quot;, fill=&quot;User assessment ranges&quot;)</code></pre>
<p><img src="/post/2009-06-04-kaggle-kernel-wine-reviews_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>图中可见 是否辣味 对评分影响不大</p>
<pre class="r"><code>data=ramen_ratings_02

ggplot(data, aes(x = Spicy_flag, fill = stars_level))+
  geom_bar(position=&quot;fill&quot;, colour=&quot;black&quot;)+
  theme_classic(base_size = 9)+
  labs(title=&#39;Bar chart for country due to stars ranges&#39;, 
        subtitle=&#39;Cumulated&#39;, y=&quot;Indicator&quot;, fill=&quot;User assessment ranges&quot;)</code></pre>
<p><img src="/post/2009-06-04-kaggle-kernel-wine-reviews_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
</div>
<div id="data-split" class="section level2">
<h2>Data split</h2>
<pre class="r"><code>set.seed(101) # Set Seed so that same sample can be reproduced in future also

sample &lt;- sample.int(n = nrow(ramen_ratings_02), size = floor(.9*nrow(ramen_ratings_02)), replace = F)
train &lt;- ramen_ratings_02[sample, ]%&gt;%select(-variety,-stars,-stars_level,-brand)
test  &lt;- ramen_ratings_02[-sample, ]%&gt;%select(-variety,-stars,-stars_level,-brand)</code></pre>
<pre class="r"><code>dim(ramen_ratings_02)</code></pre>
<pre><code>## [1] 3166   13</code></pre>
<pre class="r"><code>dim(train)</code></pre>
<pre><code>## [1] 2849    9</code></pre>
<pre class="r"><code>dim(test)</code></pre>
<pre><code>## [1] 317   9</code></pre>
<pre class="r"><code>glimpse(train)</code></pre>
<pre><code>## Observations: 2,849
## Variables: 9
## $ style        &lt;chr&gt; &quot;Pack&quot;, &quot;Pack&quot;, &quot;Bowl&quot;, &quot;Pack&quot;, &quot;Box&quot;, &quot;Cup&quot;, &quot;Bo...
## $ country      &lt;chr&gt; &quot;Malaysia&quot;, &quot;Taiwan&quot;, &quot;South Korea&quot;, &quot;UK&quot;, &quot;Malay...
## $ stars_target &lt;fct&gt; 1, 1, 0, 0, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0...
## $ brand_top    &lt;fct&gt; MyKuali, Other, Ottogi, Other, MyKuali, Other, Ni...
## $ Spicy        &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0...
## $ Spicy_flag   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0...
## $ Beef_flag    &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, ...
## $ Udon_flag    &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, ...
## $ Chicken_flag &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, ...</code></pre>
</div>
<div id="model" class="section level2">
<h2>Model</h2>
<p>是否辣味果然没有进入模型变量</p>
<pre class="r"><code>tree = rpart(stars_target ~ country+style+brand_top+Spicy_flag, data=train,method = &#39;class&#39;)
rpart.plot(tree)</code></pre>
<p><img src="/post/2009-06-04-kaggle-kernel-wine-reviews_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<pre class="r"><code>prp(tree)</code></pre>
<p><img src="/post/2009-06-04-kaggle-kernel-wine-reviews_files/figure-html/unnamed-chunk-19-2.png" width="672" /></p>
<pre class="r"><code>#tree</code></pre>
</div>
<div id="evaluation" class="section level2">
<h2>evaluation</h2>
<p>如果什么都不知道准确率为50%；根据平均数 准确率为56% 。根据运用决策树模型，使用产地/品牌/类型 3个变量 ，准确率为67%</p>
<p>on training data set : 66%</p>
<pre class="r"><code>train$predict_stars_target&lt;-predict(tree, train, type = &#39;class&#39;)
table_mat &lt;- table(train$stars_target, train$predict_stars_target)
table_mat</code></pre>
<pre><code>##    
##       0   1
##   0 997 613
##   1 335 904</code></pre>
<pre class="r"><code>train%&gt;%mutate(true=if_else(stars_target==predict_stars_target,1,0))%&gt;%group_by()%&gt;%summarise(true=sum(true),total=n())%&gt;%mutate(accuary_rate=true/total)</code></pre>
<pre><code>## # A tibble: 1 x 3
##    true total accuary_rate
##   &lt;dbl&gt; &lt;int&gt;        &lt;dbl&gt;
## 1  1901  2849        0.667</code></pre>
<p>on testing data set: 67%</p>
<pre class="r"><code>test$predict_stars_target&lt;-predict(tree, test, type = &#39;class&#39;)
table_mat &lt;- table(test$stars_target, test$predict_stars_target)
table_mat</code></pre>
<pre><code>##    
##       0   1
##   0 129  65
##   1  37  86</code></pre>
<pre class="r"><code>test%&gt;%mutate(true=if_else(stars_target==predict_stars_target,1,0))%&gt;%group_by()%&gt;%summarise(true=sum(true),total=n())%&gt;%mutate(accuary_rate=true/total)</code></pre>
<pre><code>## # A tibble: 1 x 3
##    true total accuary_rate
##   &lt;dbl&gt; &lt;int&gt;        &lt;dbl&gt;
## 1   215   317        0.678</code></pre>
<p>on average as benchmark : 56%</p>
<pre class="r"><code>ramen_ratings_02%&gt;%count(stars_target, sort = TRUE)%&gt;%mutate(percent = n / sum(n))</code></pre>
<pre><code>## # A tibble: 2 x 3
##   stars_target     n percent
##   &lt;fct&gt;        &lt;int&gt;   &lt;dbl&gt;
## 1 0             1804   0.570
## 2 1             1362   0.430</code></pre>
<p>高分概率最高的50个方便面的预测准确度并没有比平均高。</p>
<pre class="r"><code>test$predict_stars_target_prob&lt;-predict(tree, test)[,2]
test=test%&gt;%arrange(desc(predict_stars_target_prob))
top_50_test=head(test,50)
top_50_test%&gt;%mutate(true=if_else(stars_target==predict_stars_target,1,0))%&gt;%group_by()%&gt;%summarise(true=sum(true),total=n())%&gt;%mutate(accuary_rate=true/total)</code></pre>
<pre><code>## # A tibble: 1 x 3
##    true total accuary_rate
##   &lt;dbl&gt; &lt;int&gt;        &lt;dbl&gt;
## 1    33    50         0.66</code></pre>
</div>
<div id="roc" class="section level2">
<h2>ROC</h2>
<pre class="r"><code>Pred.cart = predict(tree, newdata = test, type = &quot;prob&quot;)[,2] 
Pred2 = prediction(Pred.cart, test$stars_target) 
plot(performance(Pred2, &quot;tpr&quot;, &quot;fpr&quot;))
abline(0, 1, lty = 2)</code></pre>
<p><img src="/post/2009-06-04-kaggle-kernel-wine-reviews_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
</div>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="/post/visit-record/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="/post/visit-record/">Visit_record</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="/post/user-2019/">useR! 2019</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="/post/user-2019/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>



  
<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'Your Disqus shortname';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


</div>

</div>
</div>
<script src="/js/ui.js"></script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'Your Google Analytics tracking ID', 'auto');
  ga('send', 'pageview');

</script>





</body>
</html>

